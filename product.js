
/* cachebust:true */ define("nord/feature/productPage/shareButtons",["jquery","nord/config"],function(e){function t(){i()}function i(){e("#fb-root").length||e("body").append(e('<div id="fb-root"></div>'));try{window&&!window.FB&&e.getScript("//connect.facebook.net/en_US/all.js#xfbml=1").done(function(){window.FB&&FB.init({status:!0,cookie:!0,xfbml:!0})}).fail(function(e,t,i){console.log(i)})}catch(t){console.log("There was an error while downloading the Facebook SDK in the addLikeFaces function.  Error: ("+t+")")}}return{init:t}}),define("text",["module"],function(e){var t,i,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r="undefined"!=typeof location&&location.href,a=r&&location.protocol&&location.protocol.replace(/\:/,""),l=r&&location.hostname,d=r&&(location.port||void 0),c=[],u=e.config&&e.config()||{};return t={version:"2.0.3",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:u.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=o[t];try{e=new ActiveXObject(i)}catch(n){}if(e){o=[i];break}}return e},parseName:function(e){var t=!1,i=e.indexOf("."),o=e.substring(0,i),n=e.substring(i+1,e.length);return i=n.indexOf("!"),-1!==i&&(t=n.substring(i+1,n.length),t="strip"===t,n=n.substring(0,i)),{moduleName:o,ext:n,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,o,n){var s,r,a,l=t.xdRegExp.exec(e);return l?(s=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==o.toLowerCase()||(a||r)&&a!==n)):!0},finishLoad:function(e,i,o,n){o=i?t.strip(o):o,u.isBuild&&(c[e]=o),n(o)},load:function(e,i,o,n){if(n.isBuild&&!n.inlineText)return void o();u.isBuild=n.isBuild;var s=t.parseName(e),c=s.moduleName+"."+s.ext,h=i.toUrl(c),p=u.useXhr||t.useXhr;!r||p(h,a,l,d)?t.get(h,function(i){t.finishLoad(e,s.strip,i,o)},function(e){o.error&&o.error(e)}):i([c],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,o)})},write:function(e,i,o){if(c.hasOwnProperty(i)){var n=t.jsEscape(c[i]);o.asModule(e+"!"+i,"define(function () { return '"+n+"';});\n")}},writeFile:function(e,i,o,n,s){var r=t.parseName(i),a=r.moduleName+"."+r.ext,l=o.toUrl(r.moduleName+"."+r.ext)+".js";t.load(a,o,function(){var i=function(e){return n(l,e)};i.asModule=function(e,t){return n.asModule(e,l,t)},t.write(e,a,i,s)},s)}},"node"===u.env||!u.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(i=require.nodeRequire("fs"),t.get=function(e,t){var o=i.readFileSync(e,"utf8");0===o.indexOf("ï»¿")&&(o=o.substring(1)),t(o)}):"xhr"===u.env||!u.env&&t.createXhr()?t.get=function(e,i,o){var n=t.createXhr();n.open("GET",e,!0),u.onXhr&&u.onXhr(n,e),n.onreadystatechange=function(){var t,s;4===n.readyState&&(t=n.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=n,o(s)):i(n.responseText))},n.send(null)}:("rhino"===u.env||!u.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var i,o,n="utf-8",s=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),n)),l="";try{for(i=new java.lang.StringBuffer,o=a.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),i.append(o);null!==(o=a.readLine());)i.append(r),i.append(o);l=String(i.toString())}finally{a.close()}t(l)}),t}),define("text!htmlTemplate/dialog/modalFramework.html",[],function(){return'<aside id="modal-container" class="modal" role="dialog" aria-describedby="modal-article">\n	<div class="modal-content-wrapper">\n		<div id="modal-content" class="modal-content">\n			<button class="sprite sprite-close-lg ir modal-close" title="close">close</button>\n			<article id="modal-article"></article>\n		</div>\n	</div>\n</aside>\n'}),define("nord/feature/util/hub",[],function(){function e(e){this.topics={},e&&e.attach&&"object"==typeof e.attach&&this.attach(e.attach)}return e.prototype={publish:function(e,t){var i,o,n;if(this.topics[e])for(i=this.topics[e],o=t||[],n=i.length-1;n>=0;n--)i[n].apply(this,o)},subscribe:function(e,t){return this.topics[e]||(this.topics[e]=[]),"function"==typeof t&&this.topics[e].push(t),{topic:e,callback:t}},unsubscribe:function(e){var t,i,o=e.topic;if(this.topics[o])for(t=this.topics[o],i=t.length-1;i>=0;i--)t[i]===e.callback&&t.splice(i,1)},attach:function(e){var t=this;e.on=function(){return t.subscribe.apply(t,arguments)},e.off=function(){return t.unsubscribe.apply(t,arguments)},e.trigger=function(){return t.publish.apply(t,arguments)}}},e}),define("nord/feature/navigation/_popup",["jquery"],function(e){function t(t){t.on("click.popup",".js-popup-link",function(t){t.preventDefault();var n=e(this),s=n.data("popupHeight")||0,r=n.data("popupWidth")||0,a={};s>0&&(a.height=s),r>0&&(a.width=r),a.name=n.attr("title")||o.name,i(n.attr("href"),a)})}function i(t,i){var n,s;if(!t)throw new Error("popup: You must specify a URL to open.");i=e.extend({},o,i),n=["height=",i.height,",","menubar=",i.menubar,",","scrollbars=",i.scrollbars,",","status=",i.status,",","resize=",i.resize,",","toolbar=",i.toolbar,",","width=",i.width].join(""),s=window.open(t,i.name.replace(/[\s-]+/g,""),n),i.refocus===!0&&s.focus()}var o={height:475,menubar:"no",name:"popup",refocus:!1,resize:"yes",scrollbars:"yes",status:"no",toolbar:"no",width:620};return{init:function(i){i=e(i?i:"body"),t(i)}}}),define("nord/feature/dialog/popover",["jquery"],function(e){function t(t){var n=".popover";t.on("click.popover",".js-popover-link",function(t){t.preventDefault(),t.stopPropagation();var i=e(this),n={};o(i,n)}).on("click.popoverclose",function(t){e(t.target).closest(n).length&&i(e(n))}),e(".sprite-popover-close").on("click.popoverclose",function(t){t.preventDefault(),t.stopPropagation(),i(e(this).closest(n))})}function i(e){e.removeClass("active").css("left",""),clearTimeout(s)}function o(t,i){if(t.constructor!==e&&(t=e(t)),!t.data("popoverId"))throw new Error("Popover link triggers must have a target");var o=e("#"+t.data("popoverId"));if(0===o.length)throw new Error("Popover target does not exist: #"+t.data("popoverId"));var r={};i=e.extend({},r,i),o.addClass("active"),o.hasClass("tooltip")&&(s=n(o))}function n(e){return setTimeout(function(){e.removeClass("active").css("left","")},r)}var s,r=3e3;return{init:function(i,o){r=o>0?o:r,i=i?i:e("body"),t(i)},close:i}}),define("nord/feature/util/contentBootstrap",["jquery","nord/feature/navigation/_popup","nord/feature/dialog/popover","nord/feature/dialog/modal"],function(e,t,i){function o(e){e.find(".nord-vid").length>0&&require(["nord/featureSet/internalFlashVideo"],function(t){t.init(e)})}function n(t){var i=e(".link-target-video-modal",t),o=e(".link-target-modal",t);i.length>0&&require(["nord/feature/dialog/modal"],function(t){i.each(function(){var i=e(this),o=i.prop("href"),n=o.indexOf("?")>-1?"&":"?",s=t.create(o+n+"onlycontent=true");i.on("click.show-modal",function(e){s.show(),e.preventDefault()})})}),o.length>0&&require(["nord/feature/dialog/modal"],function(t){o.each(function(){var i=e(this),o=i.prop("href"),n=o.indexOf("?")>-1?"&":"?",s=t.create(o+n+"onlycontent=true",{theme:"light"});i.on("click.show-modal",function(e){s.show(),e.preventDefault()})})})}return{init:function(s){var r=e(s?s:"body");t.init(r),i.init(r),n(r),o(r)}}}),define("nord/feature/dialog/modal",["jquery","mustache","nord/config","text!htmlTemplate/dialog/modalFramework.html","nord/feature/util/hub","nord/feature/util/contentBootstrap"],function(e,t,i,o,n,s){function r(){u=e(o),u.on("click.modal",function(){C&&y&&e(this).hasClass("modal-overlay")&&C.hide()}),h=u.find(".modal-content"),h.on("click.modal",function(e){e.stopPropagation()}),h.on("click.modal",".modal-close",function(e){C&&C.hide(),e.preventDefault()}),h.delegate(".modal-cancel","click.modal",function(e){C&&C.hide(),e.preventDefault()}),f=h.find(".modal-close"),p=u.find("#modal-article"),u.appendTo("body"),e(document).on("keyup.modal",function(e){27===e.keyCode&&y&&C&&C.hide()}),e(window).on("resize.modal",function(){C&&C.settings.centered&&a()})}function a(){if(y){h.css({left:0,top:0});var e=b.browserWidth(),t=b.browserHeight(),i={left:(e-h.outerWidth(!0))/2,top:(t-h.outerHeight(!0))/2};i.left=i.left<0?0:i.left,i.top=i.top<0?0:i.top,h.css(i)}}function l(e){var t={top:e.settings.top||"",left:e.settings.left||"",marginLeft:e.settings.offsetX||"",marginTop:e.settings.offsetY||"",minHeight:e.settings.minHeight||"",maxHeight:e.settings.maxHeight||"",minWidth:e.settings.minWidth||"",maxWidth:e.settings.maxWidth||""};e.settings.centered&&(t.top="",t.left=""),u.toggleClass("modal-overlay",e.settings.overlay),h.toggleClass("modal-theme-dark","dark"===e.settings.theme).toggleClass("modal-theme-light","light"===e.settings.theme).toggleClass("modal-theme-standard","standard"===e.settings.theme).css(t),e.settings.paddingInContent&&h.css("padding","0"),"standard"===e.settings.theme?f.removeClass("sprite-close-lg").addClass("sprite-close-sm"):f.removeClass("sprite-close-sm").addClass("sprite-close-lg"),p.empty().append(e.content)}function d(t,i){var o=s;e.get(i).done(function(i){t.content=e(i),o.init(t.content)}).fail(function(){t.content="Unable to load the page"}).always(function(){C===t&&y&&(C=null,t.show())})}function c(e,t){u||r();var i=Object.create(k);return i.init(e,t),i}var u,h,p,f,m="beforeshow",g="show",v="beforeclose",w="close",b=i.getValue("shopper.clientInfo"),_={delayAjaxContentLoading:!0,theme:"dark",overlay:!0,centered:!0,top:0,left:0,offsetX:!1,offsetY:!1,minHeight:!1,maxHeight:!1,minWidth:!1,maxWidth:!1},y=!1,C=!1,k={init:function(t,i){var o,s=(new n({attach:this}),typeof t),r=this;if(this.content="",this.settings=e.extend({},_,i||{}),"string"!==s||0!==t.indexOf("http://")&&0!==t.indexOf("https://"))if("string"===s)this.content=t;else{if("object"!==s||null===t||!t.nodeType&&t.constructor!==e)throw new Error("Invalid content for modal");this.content=t}else this.content="Loading...",r.settings.delayAjaxContentLoading?o=r.on(m,function(){d(r,t),r.off(o)}):d(r,t)},setMinHeight:function(e){this.settings.minHeight=e,h.css({minHeight:e})},show:function(){y&&C===this||(C!==this&&(C&&(C.trigger(v),C.trigger(w)),l(this)),C=this,this.trigger(m),u.show(),y=!0,u.attr("aria-hidden","false"),this.settings.centered&&a(),e("body").addClass("no-scroll"),f.focus(),this.trigger(g))},hide:function(){var t=this;y&&C===this&&(this.trigger(v),p.find('iframe[src*="//www.youtube.com/"]').each(function(){var e,i;e=this,i=this.src,this.src="",t.on(m,function(){e.src=i})}),u.hide(),y=!1,u.attr("aria-hidden","true"),e("body").removeClass("no-scroll"),this.trigger(w),u.trigger("modal.close"))}};return{create:c}}),define("nord/feature/util/querystring",["jquery"],function(e){function t(e,t,i,o){var n,s=new RegExp("([?&])"+t+"=[^&$]*","i");return o="string"==typeof o?o:"?",n=0!==e.length?"&":o,e.match(s)?e.replace(s,"$1"+t+"="+i):e+n+t+"="+i}function i(t,i){var o,n={};if(i="string"==typeof i?i:"?","string"!=typeof t)throw new Error("nord/util/querystring: the deserialize method only accepts strings.");return o=t.indexOf(i),o>=0&&(t=t.substr(o+1)),e.each(t.split("&"),function(e,t){var i,o,s=t.split("=");s.length>0&&(i=decodeURIComponent(s.shift()),o=s.length>0?decodeURIComponent(s.shift()):void 0,"undefined"==typeof n[i]?n[i]=o:n[i].constructor===Array?n[i].push(o):n[i]=[n[i],o])}),n}function o(t,i){return i="string"==typeof i?i:"?",t=e.param(t),t=t?i+t:""}return{deserialize:i,serialize:o,updateParameter:t}}),define("nord/feature/util/cookie",["nord/config","nord/feature/util/querystring"],function(e,t){function i(e,t,i){var o="",n="",s="",r="";return"undefined"==typeof e||"undefined"==typeof t?void("warn"in window.console&&window.console.warn("Cookie: Unable to set cookie when no name or value is passed.")):("object"==typeof i&&("expires"in i&&(o="; expires="+i.expires.toUTCString()),"path"in i&&(n="; path="+i.path),"domain"in i&&(s="; domain="+i.domain),"secure"in i&&(r="; secure")),"object"==typeof JSON&&"object"==typeof t&&(t=encodeURIComponent(JSON.stringify(t))),void(document.cookie=[e,"=",t,o,n,s,r].join("")))}function o(e,i){var o;return new RegExp("(?:; )?"+(e||"__foo__")+"=([^;]*);?").test(document.cookie)?(o=decodeURIComponent(RegExp.$1),i===!0?"object"==typeof JSON&&o.match(/^(\{(.*)\})|(\[(.*)\])$/)?JSON.parse(o):t.deserialize(o):o):void 0}function n(e,t){var i,n=o(e,!0),s=typeof n;return"object"===s&&n.constructor!==Array&&(i=n[t],"undefined"==typeof i&&(i=n[t.toUpperCase()],"undefined"==typeof i&&(i=n[t.toLowerCase()]))),i}function s(n,s,r,a){var l,d=o(n,a)||"",c=typeof d,u=new Date;u.setTime(u.getTime()+31536e7),l={domain:e.getValueOrDefault("cookies.domain",document.domain),expires:u,path:"/"},"object"===c&&d.constructor!==Array?(d[s]=r,d=t.serialize(d,"")):d=t.updateParameter(d,s,r,""),i(n,d,l)}function r(t){var o={domain:e.getValueOrDefault("cookies.domain",document.domain),expires:new Date(0),path:"/"};i(t,"",o)}return"undefined"==typeof window.JSON&&require(["thirdParty/shim/json3-3.2.3.min"]),{save:i,load:o,getValue:n,setValue:s,destroy:r}}),define("nord/feature/util/arrayUtils",["jquery"],function(){function e(e,i){var o=null,n=[];for(o=0;o<e.length;o++)t(i,e[o])&&n.push(e[o]);return n}function t(e,t){var i=!1;return e.indexOf(t)>-1&&(i=!0),i}return{arrayIntersection:e,arrayContain:t}}),define("text!htmlTemplate/product/available-store-list.html",[],function(){return'<div class="store">	\n	<ul id="stores-list-no-pickup">\n		{{#storeList}}\n		<li>\n			{{storeName}} ({{storeDistance}})\n			<a href="#" title="Store location map" class="store-location-link" data-store-number="{{storeNumber}}">?</a>\n		</li>\n		{{/storeList}}\n	</ul>	\n</div>	\n'}),define("text!htmlTemplate/product/available-store-to-pick-up.html",[],function(){return'{{#storeList}}	\n	<div class="store">\n		<input type="radio" class="store-available" id="store{{storeIndex}}" name="availableStores" value="{{storeId}}" {{checked}}>\n		<label for="store{{storeIndex}}">		\n			{{storeName}} ({{storeDistance}})\n			<a class="store-location-link" data-store-number="{{storeNumber}}">?</a>\n		</label>		\n		<p class="store-selected hidden">\n			{{#selectToCheck}}\n				<a href="#" class="select-option-text">Select a {{notSelectedOptionText}}</a> to check availability at this store.\n			{{/selectToCheck}}\n			{{#purchaseButton}}\n				Available in this store now. Buy online to pick up in this store today.\n				<button class="button button-primary buy-online-and-pick-up" data-store-id="{{storeId}}">buy online &amp; pick up</button>\n			{{/purchaseButton}}	\n		</p>		\n	</div>	\n{{/storeList}}'}),define("text!htmlTemplate/product/store-not-available.html",[],function(){return"<p>\n	Your selection<strong>{{selectedOptionAndValue}}</strong> is not available in any stores near you. Choose a different selection or expand your search.\n</p>	"}),define("text!htmlTemplate/product/sdd-available.html",[],function(){return'<div class="copy">	\n	Your selection<strong>{{selectedOptionAndValue}}</strong> is available for delivery in your area. Order by 1pm Pacific and select \n	Same-Day Delivery ($15) at Checkout.\n	<button title="Learn more about same day delivery" class="learn-more link-button">Learn More</button>	\n</div>\n'}),define("text!htmlTemplate/product/sdd-not-available.html",[],function(){return'<div class="copy">			\n	Your selection<strong>{{selectedOptionAndValue}}</strong> is not available for Same-Day Delivery in your area. Other expedited shipping methods are available at Checkout.\n	<button title="Learn more about same day delivery" class="learn-more link-button">Learn More</button>\n</div>'}),define("text!htmlTemplate/product/sdd-select-to-confirm.html",[],function(){return'<div class="copy">	\n	Select a {{selectOption}} to confirm that this item is available in your area.\n	<button title="Learn more about same day delivery" class="learn-more link-button">Learn More</button>	\n</div>'}),define("text!htmlTemplate/product/bopus-style-option.html",[],function(){return'<div id="size-color-options">\n	{{#styleOptions}}\n		<span class="option_label">{{label}}:</span>\n		<span class="{{class}}">{{value}}</span><br>\n	{{/styleOptions}}\n</div>'}),define("text!htmlTemplate/product/shipping-exception.html",[],function(){return'<p class="exception copy">\n	<b>Note:</b> {{exceptionMessage}}\n</p>'}),define("nord/feature/productPage/shippingReturns",["jquery","mustache","nord/feature/dialog/modal","nord/config","nord/feature/util/cookie","nord/feature/util/arrayUtils","text!htmlTemplate/product/available-store-list.html","text!htmlTemplate/product/available-store-to-pick-up.html","text!htmlTemplate/product/store-not-available.html","text!htmlTemplate/product/sdd-available.html","text!htmlTemplate/product/sdd-not-available.html","text!htmlTemplate/product/sdd-select-to-confirm.html","text!htmlTemplate/product/bopus-style-option.html","text!htmlTemplate/product/shipping-exception.html"],function(e,t,i,o,n,s,r,a,l,d,c,u,h,p){function f(){tt.available&&(E(),Y(),V(),H(),z()),m()}function m(){var t=e("#enter-location"),s=t.find(".remove-zip-code"),r=e("#zip-code-error-text");e("#enter-zip-code").on("click.enterZipCode",function(e){e.preventDefault(),gt.addClass(Ct),t.removeClass(Ct),s.addClass(Ct),r.addClass(Ct)}),e("#search-by-store-save-button").on("click.searchByStore",function(){v(ht.val(),!0)}),ht.on("keypress.enterZipcode",function(e){13===e.keyCode&&v(ht.val(),!0)}).on("focusout.checkZipFormat",function(){var t=e(this).val();J(t)||j(nt)}),ft.on("click.ssdLearnMore",".learn-more",function(t){var o=(e(this),ft.find("#same-day-delivery-modal").html()),n=i.create(o,{theme:"light"});t.preventDefault(),n.show()}),e("#edit-zip-code").on("click.editZip",function(e){e.preventDefault(),N(!0),pt.removeClass(Ct),s.removeClass(Ct),t.removeClass(Ct),gt.addClass(Ct),vt.addClass(Ct),r.addClass(Ct)}),s.on("click.removeZip",function(e){e.preventDefault(),ht.val(""),mt.val("25"),gt.removeClass(Ct),ft.removeClass(Ct),r.addClass(Ct),t.addClass(Ct),n.save("storeprefs","",{domain:o.getValueOrDefault("cookies.domain",document.domain),path:"/"})}),wt.on("click.openDirection",".store-location-link",function(t){var i=e(this).data("store-number"),o="//"+window.location.host+"/st/"+i+"/directions";t.preventDefault(),window.open(o,"newwindow","width=1045, height=617")}).on("click.selectOptionText",".select-option-text",function(){e("html, body").animate({scrollTop:e("#price").offset().top},500)}).on("click.selectStore","input[type=radio]",function(){g(e(this))})}function g(e){wt.find(".store-selected").addClass(Ct),e.closest("div").find(".store-selected").removeClass(Ct)}function v(e,t){return J(e)?(y(t),V(),void z()):(j(nt),!1)}function w(e){var t=q(e),i="";t>0?(ft.removeClass(Ct),i=t):(ft.addClass(Ct),i=""),I("sddstore",i)}function b(){E(),x(),z(),Z()}function _(){if(null!==tt.selectedSku)try{X=tt.selectedSku}catch(e){console.log("object not found")}}function y(t){var i,o=mt.val(),n=ht.val(),s=(new Date,tt.styleId),r={styleid:s,type:"Style",instoreavailability:!0,radius:o,postalcode:n,format:"json"};"undefined"!==n&&""!==n&&e.ajax({url:"/es/GetStoreAvailability",data:r,type:"GET",dataType:"json",cache:!0,success:function(e){pt.addClass(Ct),vt.removeClass(Ct),vt.find("#within-radius").text(o),vt.find("#zip-code-entered-value").text(n),w(n),i=C(e),window.sessionStorage.setItem("storeAvailablitySearchResults",JSON.stringify(i)),x(t)},error:function(e){F(e)}})}function C(e){var t,i,o={},n=null;try{t=JSON.parse(e)}catch(s){return void console.log("Parsing error:",s)}for(i=t.Fashion.SkuStores,n=0;n<i.length;n++)o=k(i[n].SkuId),i[n].size=o.size,i[n].width=o.width,i[n].color=o.color,i[n].colorId=+o.colorId,i[n].choiceGroup=o.choiceGroup;return t}function k(e){var t={size:"",width:"",color:""},i=null;for(i=0;i<tt.skus.length;i++)if(e===tt.skus[i].id)return t.size=tt.skus[i].size,t.width=tt.skus[i].width,t.color=tt.skus[i].color,t.colorId=tt.skus[i].colorId,t.choiceGroup=tt.skus[i].choiceGroup,t;return t}function x(t){var i=window.sessionStorage.getItem("storeAvailablitySearchResults"),o=[],n=[],r=[],a=0,l=0,d=mt.val(),c=new Date,u=ht.val()+"|"+d+"|null|null|"+c.toJSON(),h="",p=null,f=null,m=!1,g=wt.find("[name=availableStores]:checked").val(),v=(e("#size-color-options"),[]);if(""!==i&&null!==i){if(i.indexOf(":")>-1){try{h=JSON.parse(i)}catch(w){return void console.log("Parsing error:",w)}o=h.Fashion.SkuStores,n=h.PersonalizedLocationInfo.Stores}for(p=0;p<o.length;p++)m=X.skuId>1?1*o[p].SkuId===X.skuId:S(o[p]),m&&!s.arrayContain(r,o[p].StoreId)&&(r.push(o[p].StoreId),a++);for(kt=a,p=0;p<n.length;p++){for(f=0;f<r.length;f++)r[f]===n[p].StoreNumber&&(P(n[p].Name,n[p].DistanceToStore,n[p].StoreNumber,n[p].CorporateStoreId,l,g,v),l++);t&&(u+="~"+n[p].CorporateStoreId+"|"+n[p].StoreNumber+"|"+n[p].DistanceToStore)}t&&I("storeprefs",u),N(),1>l?L():R(v)}}function S(e){return!(tt.useChoiceGroupSelector&&e.choiceGroup!==X.choiceGroup||X.size&&e.size!==X.size||X.width&&e.width!==X.width||X.colorId&&e.colorId!==+X.colorId)}function I(e,t){var i=new Date,s=new Date(i.getTime()+94608e7),r={domain:o.getValueOrDefault("cookies.domain",document.domain),expires:s,path:"/"};t=encodeURIComponent(t),n.save(e,t,r)}function z(){var e=tt.storePickupEligible;X.skuId<1||!X.skuAvailable?T(u,{selectOption:yt.productOptionText}):e&&kt?T(d,{selectedOptionAndValue:yt.selectedOptionAndValue}):T(c,{selectedOptionAndValue:yt.selectedOptionAndValue})}function T(i,o){var n=t.render(i,o);e("#same-day-delivery-detail").html(n)}function L(){var e=t.render(l,{selectedOptionAndValue:yt.selectedOptionAndValue});wt.html(e)}function R(e){var i,o,n,s=_t?a:r,l=[];W(l),n=t.render(h,{styleOptions:l}),i=t.render(s,{storeList:e}),wt.html(n+i),o=wt.find("input[name=availableStores]:checked"),o.length&&g(o)}function P(e,t,i,o,n,s,r){var a=o+"_"+i,l=a===s?" checked":"",d=1>t?"<1 mi.":Math.ceil(t)+" mi.",c=X.skuId<0,u=!c;r.push({storeIndex:n,storeId:a,checked:l,storeName:e,storeDistance:d,storeNumber:i,selectOption:yt.notSelectedOptionText,selectToCheck:c,purchaseButton:u,notSelectedOptionText:yt.notSelectedOptionText})}function W(e){var t=Q.length,i=K.length,o=et.length;O(t,"Size",X.size,e),O(i,"Width",X.width,e),O(o,"Color",X.color,e)}function O(e,t,i,o){var n=i?i:"None Selected",s=i?"option-value":"option-value-none";e&&o.push({label:t,"class":s,value:n})}function A(e,t,i,o,n,s){o&&(e.push(n),""!==s?t.push(n+": "+s):i.push(n))}function E(){var t=Q.length,i=K.length,o=et.length,n=e("#value-buttons").length,s=[],r=[],a=[],l=null,d="",c="",u="",h="";switch(_(),A(s,r,a,t,"Size",X.size),A(s,r,a,i,"Width",X.width),A(s,r,a,o,"Color",X.color),A(s,r,a,n,"Value",X.value),s.length){case 3:c="color, size and width";break;case 2:c+=s[0].toLowerCase()+" and "+s[1].toLowerCase();break;case 1:c+=s[0].toLowerCase()}for(l=0;l<r.length;l++)0===l?d+=r[l]:(d+=r.length===l+1?" and ":", ",d+=r[l]);a.length>2?(u="Size, Width and Color",h="sizes, widths and colors"):a.length>0&&(u=void 0===a[1]?a[0]:a[0]+" and "+a[1],h=void 0===a[1]?a[0]+"s":a[0]+"s and "+a[1]+"s"),yt.notSelectedOptionText=u,yt.multipleNotSelectedText=h,yt.selectedOptionAndValue=d?", "+d+",":"",yt.productOptionText=c}function N(e){var t=yt.notSelectedOptionText?"in multiple "+yt.multipleNotSelectedText+" ":"",i=kt>1?" Stores":" Store",o="Available "+t.toLowerCase()+"at "+kt+i,n=e?ct:o;bt.text(n)}function F(t){var i=e.parseJSON(t.responseText);"NoStoresExist"===i.validationError&&(j(it),ft.removeClass(Ct))}function j(t){var i=e("#zip-code-error-text");i.text(t).removeClass(Ct),ht.focus(),ht.addClass("error"),ht.parent().addClass("error")}function V(){var t=D(),i=$(),n=ht.val()?ht.val():i.zipCode,s={},r=tt.promotion;t.length>0&&("rack"===r&&(r="Rack"),s={SkuIdList:t,Postalcode:n,saleType:r,RestrictStyleFromIntlShipping:o.getValue("product.restrictStyleFromIntlShipping")},""!==tt.customizeCode&&(s.CustomizeCode=tt.customizeCode),s=JSON.stringify(s),e.ajax({type:"POST",url:"/es/GetFulFillmentText",dataType:"json",data:s,header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){window.sessionStorage.setItem("fulfillmentArray",e),X.hasOwnProperty("channelId")||_(),Z()},error:function(){console.log("fulfillment service not available")}}))}function Z(){var t,i,n=window.sessionStorage.getItem("fulfillmentArray"),s=X.skuId>1?X.channelId:tt.skus[0].channelId,r=o.getValue("shopper.shipToCountry").length>0,a=-1!==tt.customizeCode.indexOf("GC"),l=e("#ead"),d=e("p.description"),c='<span id="rack-policy">'+dt+'<a href="//'+window.location.host+'/c/policy-rack" class="feedbacklink">Rack Policy</a></span>',u=at+rt+st+("rack"===tt.promotion?c:""),h="";if(!n||""===n)return void d.html(u);if(n.indexOf(":")>-1){try{n=JSON.parse(n)}catch(p){return void console.log("Parsing error:",p)}void 0!==n[s]&&n[s].indexOf("^")>-1&&(t=n[s].split("^"),!o.getValue("features.isEadOverrideFCEnabled")&&t.length>4?(i=t[0].trim()+" <strong>"+t[1].trim()+"</strong> "+t[2].trim()+" <strong>"+t[3].trim()+"</strong>",l.find(".ead-message").html(i),l.find(".cut-off-date-message").text(t[4].trim())):l.find(".ead-message").text(ot),t.length>6&&(u=t[5].trim()+t[6].trim()))}else n.indexOf("^")>-1?(t=n.split("^"),"rack"===tt.promotion&&(u=at+t[0]+c),a&&(u=at+t.join(" ")+st)):u=r?(a?"":n.trim()+" ")+st:at+n.trim()+" "+st;-1!==u.indexOf(lt)&&(u=u.replace(lt,""),h=lt),B(h),d.html(u)}function B(i){var o,n=(tt.canNotShipToCalifornia?ut+" ":"")+i,s=e("p.exception");n&&(s.length?s.text().indexOf(n)<0&&s.append(n):(o=t.render(p,{exceptionMessage:n}),e("#shipping-description").append(o)))}function D(){var e=[],t=null;for(t=0;t<tt.skus.length;t++)tt.skus[t].available&&""===tt.skus[t].backOrder&&e.push(tt.skus[t].id);return e}function H(){var e=tt.sddStoreNumber;void 0===e||""===e?ft.addClass(Ct):ft.removeClass(Ct)}function q(e){var t="",i="",o=-1,n=null;for(tt.sddEligibleStores&&tt.sddEligibleStores.indexOf("|")>-1&&(t=tt.sddEligibleStores.split("|")),n=0;n<t.length;n++)t[n].indexOf("-")>-1&&(i=t[n].split("-"),e===i[0]&&(o=i[1]));return o}function U(){var e=n.load("GeoLocationZipCode",!1);return e}function M(){var e,t=n.load("storeprefs",!1),i={};return t&&t.indexOf("|")>-1&&(e=t.split("|"),i.zipCode=e[0],i.radius=e[1]),i}function G(){var e=n.load("SDDCZ",!1),t=o.getValue("shopper.isLoggedIn")&&e?e:"";return t}function $(){var e=M(),t=U(),i=G(),o=t,n=25,s={};return""!==i&&(o=i.substring(0,5),n=25),e.zipCode&&(o=e.zipCode,n=e.radius),s.zipCode=o,s.radius=n,s}function Y(){var e=$();gt.addClass(Ct),mt.val(e.radius),J(e.zipCode)&&ht.length&&(vt.removeClass(Ct),ht.val(e.zipCode),y(!1))}function J(e){return/^\d{5}([\-]?\d{4})?$/.test(e)}var X={backOrder:null,skuAvailable:!0,skuId:-1,channelId:-1},Q=e("#size-buttons"),K=e("#width-buttons"),et=e("#color-buttons"),tt=(e("#color-selector"),o.getValue("product")),it="There are no stores in your area.  Please adjust your criteria to search for another store.",ot="Estimated Arrival: Select a size and color to see the estimated arrival date.",nt="Please enter a valid ZIP code.",st="Purchases made online can also be returned or exchanged at any Nordstrom store, free of charge. ",rt="Usually arrives in 3-6 business days. ",at="Free Shipping. Free Returns. All the time. ",lt="This item cannot be shipped to international addresses.",dt="We'll gladly accept online returns within 30 days of purchase for all Nordstrom Rack merchandise. To learn more, read our full ",ct="Check Store Availability",ut="This item is not available for shipment to California.",ht=e("#zip-code"),pt=e("#pick-up-in-store"),ft=e("#same-day-delivery"),mt=e("#radius-distance"),gt=e("#enter-zip-check-store"),vt=e("#shop-by-store-list"),wt=e("#available-store-list"),bt=e("#bopus-header"),_t=o.getValue("features.isPickupInStoreEnabled"),yt={notSelectedOptionText:"",multipleNotSelectedText:"",electedOptionAndValue:"",productOptionText:""},Ct="hidden",kt=0;return{init:f,updateShippingReturns:b}}),define("nord/feature/util/keyCode",{backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46}),define("text!htmlTemplate/product/inline-reviews.html",[],function(){return'<div class="inline-reviews-head">\n	<div id="back-to-reviews" class="hidden"><button type="button">Back to reviews</button></div>\n	<h3 id="inline-reviews-head-text"></h3>\n	<p id="inline-reviews-thankyou-text" class="hidden"></p>\n</div>\n<div id="BVSubmissionContainer" />\n'}),define("nord/feature/reviews/util/subclass",[],function(){var e=function(t,i){var o=function(){t.apply(this,arguments)};if(t.prototype.propertyIsEnumerable)for(var n in t.prototype)o.prototype[n]=t.prototype[n];for(var s in i)o.prototype[s]=i[s];return o.extend=function(t){return e(o,t)},o};return e}),define("nord/feature/reviews/util/observer",["nord/feature/reviews/util/subclass"],function(e){var t,i;return t=function(e){return e.trim().split(/\s+/)},i=function(e){var t,i;e=e||{},this._events={},this.attributes={};for(t in this.defaults)this.attributes[t]=this.defaults[t];for(i in e)"model"===i?this.model=e[i]:this.attributes[i]=e[i];this.initialize&&"function"==typeof this.initialize&&this.initialize()},i.extend=function(t){return e(i,t)},i.prototype={on:function(e,i,o){var n,s=t(e);for(n=0;n<s.length;n++)e=s[n],this._events[e]=this._events[e]||[],this._events[e].push({callback:i,context:o});return this},off:function(e,i,o){if(e||i){var n,s,r,a,l=t(e);for(r=0;r<l.length;r++)if(e=l[r],s=this._events[e]){for(this._events[e]=n=[],a=0;a<s.length;a++)(i&&s[a].callback!==i||o&&o!==s[a].context)&&n.push(s[a]);n.length||delete this._events[e]}}else this._events={};return this},trigger:function(e){var i,o,n,s=t(e),r=Array.prototype.slice.call(arguments,1);for(o=0;o<s.length;o++)if(e=s[o],i=this._events[e])for(n=0;n<i.length;n++)i[n].callback.apply(i[n].context||this,r);return this},one:function(e,t,i){var o=this,n=t;return t=function(){o.off(e,t,i),n.apply(this,arguments)},this.on.apply(this,[e,t,i])},get:function(e){return this.attributes[e]},set:function(e){var t,i,o;for(t in e)i=this.attributes[t],o=e[t],this.attributes[t]=o,i!==o&&this.trigger("change change:"+t,o,i)}},i}),define("nord/feature/reviews/util/parameters",["jquery"],function(e){var t=function(){this.attributes={}};return t.stringify=function(){var t,i={};for(t=0;t<arguments.length;t++)e.extend(i,arguments[t].attributes);return"?"+decodeURIComponent(e.param(i,!0))},t.prototype={add:function(e,t){return t?Array.isArray(t)?(this.attributes[e]=Array.isArray(this.attributes[e])?this.attributes[e]:[],this.attributes[e].push(t.join(","))):this.attributes[e]=t:delete this.attributes[e],this}},t}),define("nord/feature/reviews/bazaarvoice/review",["nord/feature/reviews/util/observer"],function(e){var t,i,o,n,s=["January","February","March","April","May","June","July","August","September","October","November","December"];return t=function(e){return s[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},i=function(e){var t=e.getMonth()+1,i=e.getDate();return e.getFullYear()+"-"+(10>t?"0"+t:t)+"-"+(10>i?"0"+i:i)},o=function(e){var t,i=this.get("truncate");return i!==!1&&e&&(t=e.split(/\s+/),t.length>i&&(this.set({CanTruncate:!0}),e=t.slice(0,i).join(" "))),e},n=e.extend({defaults:{Title:void 0,TotalFeedbackCount:void 0,TotalPositiveFeedbackCount:void 0,Rating:void 0,ReviewText:void 0,SubmissionTime:void 0,UserNickname:void 0,IsSyndicated:!1,SyndicationSource:void 0,truncate:80,CanTruncate:!1,IsTruncated:!0},initialize:function(){this.on("change",this.refresh).refresh()},refresh:function(){var e=new Date(this.get("SubmissionTime")),n=this.get("SyndicationSource");this.set({Date:t(e),MetaDate:i(e),TruncatedText:o.call(this,this.get("ReviewText")),IsSyndicated:!!(this.get("IsSyndicated")&&n&&"string"==typeof n.Name&&n.Name.trim().length)})
}})}),define("nord/feature/reviews/bazaarvoice/reviews",["jquery","nord/feature/reviews/util/observer","nord/feature/reviews/util/parameters","nord/feature/reviews/bazaarvoice/review"],function(e,t,i,o){var n,s="reviews.json";return n=t.extend({initialize:function(){this.models=[],this.params=new i},add:function(e){var t,i=this;for(t=0;t<e.length;t++){var n=new o(e[t]);i.models.push(n),i.trigger("add",n)}},where:function(){return this.params.add("filter",Array.apply(0,arguments)),this},sortBy:function(){return this.params.add("sort",Array.apply(0,arguments)),this},limitTo:function(e){return this.params.add("limit",e),this},fetch:function(){var t=this,o=this.model.get("url")+s+i.stringify(this.model.params,this.params),n=e.getJSON(o,function(e){e.Error||t.add(e.Results)});return n},first:function(){return this.models[0]}})}),define("nord/feature/reviews/bazaarvoice/api",["jquery","nord/feature/reviews/util/observer","nord/feature/reviews/util/parameters","nord/feature/reviews/bazaarvoice/reviews","nord/feature/reviews/bazaarvoice/review"],function(e,t,i,o,n){var s=t.extend({defaults:{url:void 0,key:void 0,version:void 0},initialize:function(){this.params=new i,this.on("change:key change:version",this.refresh).refresh()},refresh:function(){this.params.add("passkey",this.get("key")).add("callback","?"),this.get("version")&&this.params.add("apiversion",this.get("version"))},Reviews:function(){return new o({model:this})},Review:function(e){return new n(e)}});return s}),define("nord/feature/reviews/util/view",["nord/feature/reviews/util/subclass","mustache"],function(e,t){var i=function(e){this.template=t.compile(e.template||""),e.model&&(this.model=e.model),this.initialize&&this.initialize()};return i.extend=function(t){return e(i,t)},i}),define("nord/feature/reviews/views/comparativeReview",["jquery","nord/feature/reviews/util/view"],function(e,t){var i=t.extend({initialize:function(){this.model.on("change:IsTruncated",this.render,this)},create:function(t){this.el=e(this.template(this.model.attributes)),t.append(this.el),this.delegateEvents()},render:function(){this.undelegateEvents();var t=this.el;this.el=e(this.template(this.model.attributes)),t.replaceWith(this.el),this.delegateEvents()},undelegateEvents:function(){this.el.off(".comparative-review")},delegateEvents:function(){var e=this;this.el.on("click.comparative-review","[data-see-more]",function(t){t.preventDefault(),e.model.set({IsTruncated:!1})}),this.el.on("click.comparative-review","[data-see-less]",function(t){t.preventDefault(),e.model.set({IsTruncated:!0})})}});return i}),define("text!htmlTemplate/product/comparative-reviews.html",[],function(){return'<section id="bv-comparative-reviews">\n	<div class="comparative-reviews"></div>\n	<div class="vs-icon">vs</div>\n</section>'}),define("text!htmlTemplate/product/comparative-review.html",[],function(){return'<div class="comparative-review" itemprop="review" itemscope itemtype="http://schema.org/Review">\n	<h3>{{Headline}}</h3>\n	<h4><strong>{{TotalPositiveFeedbackCount}}</strong> of <strong>{{TotalFeedbackCount}}</strong> customers found this review helpful.</h4>\n	<div class="product-rating stars-{{Rating}}" title="Rating {{Rating}} out of 5 stars" itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">\n		Rating <span itemprop="ratingValue">{{Rating}}</span> out of <span itemprop="bestRating">5</span> stars\n	</div>\n	<span class="name" itemprop="name">{{Title}}</span>\n	{{#CanTruncate}}\n		{{#IsTruncated}}\n			<p itemprop="description">"{{TruncatedText}}..." <a data-see-more href="#reviews-see-more">See more</a></p>\n		{{/IsTruncated}}\n		{{^IsTruncated}}\n			<p itemprop="description">"{{ReviewText}}" <a data-see-less href="#reviews-see-less">See less</a></p>\n		{{/IsTruncated}}	\n	{{/CanTruncate}}\n	{{^CanTruncate}}\n		<p itemprop="description">"{{ReviewText}}"</p>\n	{{/CanTruncate}}\n	<span class="date">\n		<meta itemprop="datePublished" content="{{MetaDate}}">{{Date}} by <span itemprop="author">{{UserNickname}}</span>\n		{{#IsSyndicated}}\n			<span class="syndication">Written by a {{SyndicationSource.Name}} customer</span>\n		{{/IsSyndicated}}\n	</span>\n</div>\n'}),define("nord/feature/productPage/reviewComparative",["jquery","mustache","nord/config","nord/feature/reviews/util/observer","nord/feature/reviews/bazaarvoice/api","nord/feature/reviews/views/comparativeReview","text!htmlTemplate/product/comparative-reviews.html","text!htmlTemplate/product/comparative-review.html"],function(e,t,i,o,n,s,r,a){var l,d,c,u=i.getValue("reviews.bazaarvoice"),h="Top Positive Review",p="Top Critical Review",f="ComparativeReviewsReady",m="#bv-comparative-reviews";return l=function(e,t,i){var o;i.set({Headline:e}),o=new s({model:i,template:a}),o.create(t)},d=function(t,i){e(document).trigger(f,{exist:t,show:i})},c=o.extend({defaults:{isRetrieved:!1},initialize:function(){var e=this.get("id"),t=new n({url:u.dataUrl,key:u.key,version:u.version});this.positiveReviews=t.Reviews().where("rating:gte:4").where("ProductId:"+e).sortBy("Helpfulness:desc","TotalPositiveFeedbackCount:desc","SubmissionTime:desc").limitTo(1),this.negativeReviews=t.Reviews().where("rating:lte:3").where("ProductId:"+e).sortBy("Helpfulness:desc","TotalPositiveFeedbackCount:desc","SubmissionTime:desc").limitTo(1)},fetch:function(){var e=this,t=2;return this.positiveReviews.fetch().success(function(){--t||e.set({isRetrieved:!0})}),this.negativeReviews.fetch().success(function(){--t||e.set({isRetrieved:!0})}),this},hasReviews:function(){var e=this.positiveReviews.first(),t=this.negativeReviews.first();return!!(e&&e.get("TotalPositiveFeedbackCount")&&t&&t.get("TotalPositiveFeedbackCount"))},create:function(t){var i=this,o=0===e(m).length;o&&(this.get("isRetrieved")?d(this.hasReviews(),function(){i.render(t)}):this.one("change:isRetrieved",function(){d(this.hasReviews(),function(){i.render(t)})}))},render:function(t){var i=e(r),o=i.find(".comparative-reviews");l(h,o,this.positiveReviews.first()),l(p,o,this.negativeReviews.first()),i.insertAfter(t)}})}),define("nord/feature/productPage/reviewQa",["jquery","nord/config","nord/feature/util/keyCode","mustache","text!htmlTemplate/product/inline-reviews.html","nord/feature/productPage/reviewComparative"],function(e,t,i,o,n,s){function r(){P.removeClass(q),e(U).empty().addClass(q),e(M).addClass(q),e(G).empty(),e($).addClass(q),e(Y).removeClass(q),j.removeClass(q),N.addClass(q),d(A),y=!1}function a(){W.find("li").on("click.reviews",function(){l(e(this))}),R.on("click.reviews",".back-to-top",function(){e("html, body").animate({scrollTop:0},400)}).on("click.reviews",M,function(e){e.preventDefault(),r()})}function l(e){var t=W.find("li");switch(t.removeClass(H),e.addClass(H),e.attr("id")){case"bv-tab-review":E.removeClass(q),N.addClass(q);break;case"bv-tab-qa":N.removeClass(q),E.addClass(q)}}function d(t){var i=W.offset();e("html, body").animate({scrollTop:i.top},400),l(t)}function c(){var t=e("#size-details"),i=t.find("ul"),o="",n="",s=e("#size-alert");o='<li class="info copy"><a id="fit-info" href="#reviews-qa">'+D+"</a></li>",i.length?i.find("li").last().get(0).outerHTML!==o&&i.append(o):(s.hasClass(q)?(s.removeClass(q),n='<span><a id="fit-info" href="#reviews-qa">'+D+"</a></span>"):n='<ul><li class="info copy">'+t.find("span").text()+"</li>"+o+"</ul>",t.html(n))}function u(){$BV.configure("rr",{displayCode:Z,submissionContainerUrl:T.store+"rr/"+S.styleId+"?contenttype=productreview&TN=CustomerReviewSubmission"}),$BV.ui("rr","show_reviews",{productId:S.bazaarvoiceStyleId,onEvent:function(t){var i=e("#BVRRRatingSummaryLinkReadID a");S.recommendedPercentage=t.attributes.percentRecommend,S.totalReviews=t.attributes.numReviews,S.AverageProductRating=t.attributes.avgRating,e(document).trigger("ProductReviewsLoaded"),S.totalReviews>0&&c(),x=!0,k&&w(),F.text("("+S.totalReviews+")"),i.removeAttr("onclick").on("click.reviews",function(e){e.preventDefault(),d(A)})}})}function h(){P.addClass(q),e(M).addClass(q),e(G).empty(),e($).addClass(q),e(U).removeClass(q),e(Y).addClass(q),l(A)}function p(){var t=!0,i=o.render(n);e(window).triggerHandler("scroll.lazyLoadRec"),E.prepend(i),$BV.configure("rr",{userToken:I.encodedUserToken,displayCode:Z,productId:S.bazaarvoiceStyleId,allowSamePageSubmission:!0,doShowSubmission:h,onSubmissionReturn:function(){P.removeClass(q),e(U).addClass(q),d(A)},doScrollSubmission:function(){return t&&d(A),!1},onEvent:function(t){var i=t.pageType,o=t.pageStatus;S.recommendedPercentage=t.attributes.percentRecommend,S.totalReviews=t.attributes.numReviews,S.AverageProductRating=t.attributes.avgRating,e(document).trigger("ProductReviewsLoaded"),"Display"===t.eventSource&&g(i,o,S.totalReviews),"Cancel"===t.formAction&&r()}}),$BV.ui("rr","show_reviews",{productId:S.bazaarvoiceStyleId,onEvent:function(i){var o=(i.attributes.numRatingsOnlyReviews,i.productId,i.pageType),n=i.pageStatus;S.recommendedPercentage=i.attributes.percentRecommend,S.AverageProductRating=i.attributes.avgRating,e(document).trigger("ProductReviewsLoaded"),"Write"!==i.eType&&(S.totalReviews=i.attributes.numReviews),"Cancel"===i.formAction&&r(),"Display"===i.eventSource&&g(o,n,S.totalReviews),0===S.totalReviews?(t=!1,W.on("click keydown","#BVRRRatingsID, #BVRRReviewSubmissionID, #BVRRPhotoUploadID, #BVRRVideoUploadID, #BVRRBasicInformationID, #BVRRSubmissionFooterID",f),$BV.ui("rr","submit_review",{productId:S.bazaarvoiceStyleId})):c(),F.text("("+S.totalReviews+")")}})}function f(t){if("click"!==t.type&&t.which===i.tab)return!0;e('a[name^="BV_TrackingTag_Rating_Summary_1_WriteReview"]').data("bvjsref");C=!0,W.off("click keydown","#BVRRRatingsID, #BVRRReviewSubmissionID, #BVRRPhotoUploadID, #BVRRVideoUploadID, #BVRRBasicInformationID, #BVRRSubmissionFooterID",f)}function m(){e(M).removeClass(q)}function g(t,i,o){switch(t){case"ReviewSubmit":case"Input":o>0&&m(),"validationError"===i&&d(A),e(G).html("Write a Review"),j.addClass(q),y=!0;break;case"Preview":e(G).html("Preview Your Review"),d(A),y=!0;break;case"ThankYou":case"Confirm":"Confirm"===t&&void 0===i&&(i="REVIEW_THANKYOU"),"REVIEW_THANKYOU"===i&&(e(G).addClass(q),e("#BVRRSubmittedReviewContentID").addClass(q),m(),e(document).trigger("Product_Review_Thankyou")),"REVIEW_ALREADY_SUBMITTED"===i&&(o>0&&m(),e("#BVRRReviewFormButtonsID").addClass(q)),y=!1}if(!t&&!i){var n,s,a,c;o>0?(n=e(".BVRRRatingSummaryLinkRead").first(),s=n.find("a"),a=s.text(),c='<span class="'+X+'">'+a+"</span>",s.addClass(q),n.append(c),e("."+X).on("click",function(){r(),l(A)})):(e(".BVRRRatingSummaryLinkWriteFirst a").addClass(J),e(".BVRRRatingSummaryNoReviewsWriteImageLink a").addClass(J))}}function v(){$BV.configure("qa",{displayCode:B,submissionContainerUrl:T.store+"rr/"+S.styleId+"?contenttype=productaskanswer&TN=ProductDiscussionSubmission"}),$BV.ui("qa","show_questions",{productId:S.bazaarvoiceStyleId,subjectType:"product",onEvent:function(t){var i=e("#BVQASummaryBoxViewQuestionsID a");S.QACounts=t.attributes.numQuestions,k=!0,x&&w(),e("#bv-qa-count").text("("+S.QACounts+")"),i.removeAttr("onclick").on("click.reviews",function(e){e.preventDefault(),d(O)})}})}function w(){S.QACounts>0&&0===S.totalReviews&&l(O)}function b(){if(!t.getValue("shopper.environmentInfo.isPos")){var i=z.staticUrl;e.getScript(i+Z+"/"+V).done(function(e,t){"success"===t&&window.$BV?I.isLoggedIn?p():u():console.error("Product Page Template: Error with fetching BV Review API.")}).fail(function(e,t,i){console.error("Product Page Template: Error with fetching BV Review API: "+i)}),e.getScript(i+B+"/"+V).done(function(e,t){"success"===t&&window.$BV?v():console.error("Product Page Template: Error with fetching BV QA API.")}).fail(function(e,t,i){console.error("Product Page Template: Error with fetching BV QA API: "+i)})}}function _(){a(),b(),"#reviewTabs"===location.hash&&(location.hash="#"+L)}var y=!1,C=!1,k=!1,x=!1,S=t.getValue("product"),I=t.getValue("shopper"),z=t.getValue("reviews.bazaarvoice"),T=t.getValue("urls"),L="reviews-qa",R=e("#"+L),P=e("#BVRRContainer"),W=e("#bv-tabs"),O=e("#bv-tab-qa"),A=e("#bv-tab-review"),E=e("#bv-content-review"),N=e("#bv-content-qa"),F=e("#bv-review-count"),j=e("#bv-product-name"),V="bvapi.js",Z="4094redes",B="4094p",D="See fit information from our customers.",H="active",q="hidden",U="#BVSubmissionContainer",M="#back-to-reviews",G="#inline-reviews-head-text",$="#inline-reviews-thankyou-text",Y=".bv-product-label",J="simulatedWriteReview",X="simulatedBVSummaryLinkRead",Q="#BVRRContainer .BVRRPrimaryRatingSummary .BVRRRatingSummaryLinks",K=new s({id:S.bazaarvoiceStyleId}).fetch();return e(document).ready(function(){e("#sizeAlert").on("click","#fitScale",function(){r()}),e(document).on("click","."+J,function(e){return y&&(l(A),C||0!==S.totalReviews||f(e)),d(A),!1})}),e(document).on("ProductReviewsLoaded",function(){K.create(e(Q))}),{init:_}}),define("nord/feature/productPage/jquery.elevateZoom",["jquery"],function(e){!function(e){var t={init:function(t,i){this.elem=i,this.$elem=e(i),this.$elem.parent().removeAttr("title").removeAttr("alt"),this.options=e.extend({},e.fn.elevateZoom.options,t),this.imageSrc=this.$elem.data("zoom-image"),this.options.enabled=!0,this.zoomImage=this.imageSrc,this.refresh(1)},refresh:function(t){t||(t=this.options.refresh),setTimeout(e.proxy(function(){this.fetch(this.imageSrc)},this),t)},fetch:function(t){var i=new Image;i.onload=e.proxy(function(){this.largeWidth=i.width,this.largeHeight=i.height,this.startZoom(),this.currentImage=this.imageSrc,this.options.onZoomedImageLoaded(this.$elem)},this),i.src=t,t||(this.options.enabled=!1,this.largeWidth=i.width,this.largeHeight=i.height,this.startZoom(),this.currentImage=this.imageSrc,this.options.onZoomedImageLoaded(this.$elem))},buildZoomLens:function(){var t,i;this.zoomLens=e("."+this.lensClass),this.zoomLens.length<1&&(t=this.nonZoomHeight<this.options.zoomWindowWidth/this.widthRatio?this.nonZoomHeight:this.options.zoomWindowHeight/this.heightRatio,i=this.largeWidth<this.options.zoomWindowWidth?this.nonZoomWidth:this.options.zoomWindowWidth/this.widthRatio,this.zoomLens=e('<div class="'+this.lensClass+"\" style='width:"+i+"px; height:"+t+"px;' />").appendTo(this.zoomContainer).click(e.proxy(function(){this.$elem.trigger("click")},this)))},buildZoomWindow:function(){this.zoomWindow=e("<div class='"+this.options.zoomWindowClass+"' />").css({"background-color":this.options.zoomWindowBgColor,"background-image":"url("+this.imageSrc+")","background-size":this.largeWidth/this.currentZoomLevel+"px "+this.largeHeight/this.currentZoomLevel+"px",border:this.options.borderSize+"px solid "+this.options.borderColor,width:this.options.zoomWindowWidth+"px",height:this.options.zoomWindowHeight+"px",left:this.nonZoomWidth+"px"}).wrap('<div class="'+this.options.zoomWindowContainerClass+'" style="width:'+this.options.zoomWindowWidth+'" />').appendTo(isNaN(this.options.zoomWindowPosition)?"body":this.zoomContainer).click(e.proxy(function(){this.$elem.trigger("click")},this))},setupScrollZoom:function(){var t,i;this.options.scrollZoom&&(t=this.options.minZoomLevel?this.options.minZoomLevel:1*this.options.scrollZoomIncrement,i=this.options.maxZoomLevel?this.options.maxZoomLevel:1*this.options.scrollZoomIncrement,this.zoomContainer.add(this.$elem).on("mousewheel DOMMouseScroll MozMousePixelScroll",e.proxy(function(o){o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),this.scrollLock=!0,clearTimeout(e.data(this,"timer")),e.data(this,"timer",setTimeout(e.proxy(function(){this.scrollLock=!1},this),250)),(o.originalEvent.wheelDelta||-1*o.originalEvent.detail)/120>0?this.currentZoomLevel>t&&this.changeZoomLevel(this.currentZoomLevel-this.options.scrollZoomIncrement):this.options.maxZoomLevel?this.currentZoomLevel<i&&this.changeZoomLevel(parseFloat(this.currentZoomLevel,10)+this.options.scrollZoomIncrement):this.changeZoomLevel(parseFloat(this.currentZoomLevel,10)+this.options.scrollZoomIncrement)},this)))},startZoom:function(){this.enabled=this.options.enabled,this.nonZoomWidth=this.$elem.width(),this.nonZoomHeight=this.$elem.height(),this.isWindowActive=!1,this.isLensActive=!1,this.overWindow=!1,this.zoomLock=1,this.scrollingLock=!1,this.changeBgSize=!1,this.currentZoomLevel=this.options.zoomLevel,this.zoomContainerId=this.options.zoomContainerId,this.lensClass=this.options.lensClass,this.nonZoomOffset=this.$elem.offset(),this.widthRatio=this.largeWidth/this.currentZoomLevel/this.nonZoomWidth,this.heightRatio=this.largeHeight/this.currentZoomLevel/this.nonZoomHeight,this.options.imageCrossfade&&(this.zoomWrap=this.$elem.css("position","absolute").wrap("<div style='height:"+this.nonZoomHeight+"px;width:"+this.nonZoomWidth+"px;' class='zoomWrapper' />")),this.zoomContainer=e('<div id="'+this.zoomContainerId+"\" style='-webkit-transform: translateZ(0);position:absolute;left:"+this.nonZoomOffset.left+"px;top:"+this.nonZoomOffset.top+"px;height:"+this.nonZoomHeight+"px;width:"+this.nonZoomWidth+"px;' />").appendTo("body"),this.buildZoomLens(),this.buildZoomWindow(),this.setupScrollZoom(),this.zoomContainer.add(this.$elem).on("mousemove",e.proxy(function(e){this.overWindow===!1&&this.setElements("show"),(this.lastX!==e.clientX||this.lastY!==e.clientY)&&(this.setPosition(e),this.currentLoc=e),this.lastX=e.clientX,this.lastY=e.clientY},this)).on("mouseenter",e.proxy(function(){this.overWindow===!1&&this.enabled===!0&&this.setElements("show")},this)).on("mouseleave",e.proxy(function(){this.scrollLock||this.setElements("hide")},this)).add(this.options.showLens?this.zoomLens:"").on("touchstart",e.proxy(function(e){e.preventDefault(),this.showElements(e,!0),this.setPosition(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0])},this)).on("touchmove",e.proxy(function(e){e.preventDefault(),this.setPosition(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0])},this)).on("touchend",e.proxy(this.hideElements,this))},setElements:function(t){"show"===t&&this.isWindowSet&&(this.zoomLens.off("click.enableZoom").on("click.enableZoom",e.proxy(this.showElements,this)),this.options.showLens&&this.showHideLens("show"),e("#"+this.zoomContainerId).removeClass("hidden")),"hide"===t&&(this.zoomLens.removeClass("active").off("click.enableZoom").off("click.disableZoom"),this.hideElements())},showElements:function(e,t){this.zoomLens.toggleClass("active",!this.isWindowActive),this.isWindowActive?this.zoomWindow.stop(!0,!0).fadeOut(this.options.zoomWindowFadeOut):this.zoomWindow.stop(!0,!0,!1).fadeIn(this.options.zoomWindowFadeIn),t&&this.options.showLens&&this.showHideLens("show"),this.isWindowActive=!this.isWindowActive},hideElements:function(){this.isWindowActive&&(this.options.zoomWindowFadeOut?this.zoomWindow.stop(!0,!0).fadeOut(this.options.zoomWindowFadeOut):this.zoomWindow.hide(),this.isWindowActive=!1),this.options.showLens&&this.showHideLens("hide")},setPosition:function(e){var t,i,o=this;return o.nonZoomHeight=o.$elem.height(),o.nonZoomWidth=o.$elem.width(),o.nonZoomOffset=o.$elem.offset(),o.options.responsive&&!o.options.scrollZoom&&o.options.showLens&&(t=o.nonZoomHeight<o.options.zoomWindowWidth/o.widthRatio?o.nonZoomHeight:String(o.options.zoomWindowHeight/o.heightRatio),i=o.largeWidth<o.options.zoomWindowWidth?o.nonZoomHWidth:o.options.zoomWindowWidth/o.widthRatio,o.widthRatio=o.largeWidth/o.nonZoomWidth,o.heightRatio=o.largeHeight/o.nonZoomHeight,o.zoomLens.css({width:String(o.options.zoomWindowWidth/o.widthRatio)+"px",height:String(o.options.zoomWindowHeight/o.heightRatio)+"px"})),o.zoomContainer.css({top:o.nonZoomOffset.top}),o.zoomContainer.css({left:o.nonZoomOffset.left}),o.mouseLeft=parseInt(e.pageX-o.nonZoomOffset.left,10),o.mouseTop=parseInt(e.pageY-o.nonZoomOffset.top,10),o.Etoppos=o.mouseTop<o.zoomLens.height()/2,o.Eboppos=o.mouseTop>o.nonZoomHeight-o.zoomLens.height()/2-2*o.options.lensBorderSize,o.Eloppos=o.mouseLeft<0+o.zoomLens.width()/2,o.Eroppos=o.mouseLeft>o.nonZoomWidth-o.zoomLens.width()/2-2*o.options.lensBorderSize,o.mouseLeft<=0||o.mouseTop<0||o.mouseLeft>o.nonZoomWidth||o.mouseTop>o.nonZoomHeight?void o.setElements("hide"):(o.options.showLens&&(o.lensLeftPos=String(o.mouseLeft-o.zoomLens.width()/2),o.lensTopPos=String(o.mouseTop-o.zoomLens.height()/2)),o.Etoppos&&(o.lensTopPos=0),o.Eloppos&&(o.windowLeftPos=0,o.lensLeftPos=0),o.Eboppos&&(o.lensTopPos=Math.max(o.nonZoomHeight-o.zoomLens.height()-2*o.options.lensBorderSize,0)),o.Eroppos&&(o.lensLeftPos=o.nonZoomWidth-o.zoomLens.width()-2*o.options.lensBorderSize),o.setWindowPosition(e),o.options.showLens&&(o.fullwidth&&(o.lensLeftPos=0),o.zoomLens.css({left:o.lensLeftPos+"px",top:o.lensTopPos+"px"})),void 0)},showHideLens:function(e){"show"===e&&this.enabled===!0&&(this.isLensActive||(this.options.lensFadeIn?this.zoomLens.stop(!0,!0,!1).fadeIn(this.options.lensFadeIn):this.zoomLens.show(),this.isLensActive=!0)),"hide"===e&&this.isLensActive&&(this.options.lensFadeOut?this.zoomLens.stop(!0,!0).fadeOut(this.options.lensFadeOut):this.zoomLens.hide(),this.isLensActive=!1)},setWindowPosition:function(e){var t=this;t.isWindowSet=!0,t.windowOffsetTop=0,t.windowOffsetLeft=t.nonZoomWidth,t.zoomWindow.css({top:t.windowOffsetTop}),t.zoomWindow.css({left:t.windowOffsetLeft+2+"px"}),t.windowLeftPos=String(-1*((e.pageX-t.nonZoomOffset.left)*t.widthRatio-t.zoomWindow.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nonZoomOffset.top)*t.heightRatio-t.zoomWindow.height()/2)),t.Etoppos&&(t.windowTopPos=0),t.Eloppos&&(t.windowLeftPos=0),t.Eboppos&&(t.windowTopPos=-1*(t.largeHeight/t.currentZoomLevel-t.zoomWindow.height())),t.Eroppos&&(t.windowLeftPos=-1*(t.largeWidth/t.currentZoomLevel-t.zoomWindow.width())),t.fullheight&&(t.windowTopPos=0),t.fullwidth&&(t.windowLeftPos=0),1===t.zoomLock&&(t.widthRatio<=1&&(t.windowLeftPos=0),t.heightRatio<=1&&(t.windowTopPos=0)),t.largeHeight<t.options.zoomWindowHeight&&(t.windowTopPos=0),t.largeWidth<t.options.zoomWindowWidth&&(t.windowLeftPos=0),t.options.easing?(t.xp||(t.xp=0),t.yp||(t.yp=0),t.loop||(t.loop=setInterval(function(){t.xp+=(t.windowLeftPos-t.xp)/t.options.easingAmount,t.yp+=(t.windowTopPos-t.yp)/t.options.easingAmount,t.scrollingLock?(clearInterval(t.loop),t.xp=t.windowLeftPos,t.yp=t.windowTopPos,t.xp=-1*((e.pageX-t.nonZoomOffset.left)*t.widthRatio-t.zoomWindow.width()/2),t.yp=-1*((e.pageY-t.nonZoomOffset.top)*t.heightRatio-t.zoomWindow.height()/2),t.changeBgSize&&(t.zoomWindow.css(t.nonZoomHeight>t.nonZoomWidth?{"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}:{"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.scrollingLock=!1,t.loop=!1):(t.changeBgSize&&(t.nonZoomHeight>t.nonZoomWidth?t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}):(t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.xp+"px "+t.yp+"px"}))},16))):(t.changeBgSize&&(t.zoomWindow.css(t.nonZoomHeight>t.nonZoomWidth?{"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}:t.largeHeight/t.newvaluewidth<t.options.zoomWindowHeight?{"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}:{"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}))},swaptheimage:function(e,t){var i=this,o=new Image;return i.options.onImageSwap(i.$elem),o.onload=function(){i.largeWidth=o.width,i.largeHeight=o.height,i.zoomImage=t,i.zoomWindow.css({"background-size":i.largeWidth/i.currentZoomLevel+"px "+i.largeHeight/i.currentZoomLevel+"px"}),i.swapAction(e,t)},""!==t?void(o.src=t):void i.swapAction(e,t)},swapAction:function(t,i){var o,n,s=this,r=new Image;r.onload=function(){s.nonZoomHeight=r.height,s.nonZoomWidth=r.width,s.options.onImageSwapComplete(s.$elem),s.doneCallback()},r.src=t,s.enabled=""!==i,s.enabled===!0&&(s.zoomWindow.css({backgroundImage:"url("+i+")"}),s.currentImage=i),s.options.imageCrossfade?(o=s.$elem,n=o.clone(),s.$elem.attr("src",t),s.$elem.after(n),n.stop(!0).fadeOut(s.options.imageCrossfade,function(){e(this).remove()}),o.fadeIn(s.options.imageCrossfade)):s.$elem.attr("src",t),s.options.constrainType&&("height"===s.options.constrainType&&(s.options.imageCrossfade?(s.zoomWrap.css("height",s.options.constrainSize),s.zoomWrap.css("width","auto")):(s.$elem.css("height",s.options.constrainSize),s.$elem.css("width","auto"))),"width"===s.options.constrainType&&(s.zoomContainer.css("height","auto"),s.zoomContainer.css("width",s.options.constrainSize),s.options.imageCrossfade?(s.zoomWrap.css("height","auto"),s.zoomWrap.css("width",s.options.constrainSize)):(s.$elem.css("height","auto"),s.$elem.css("width",s.options.constrainSize))))},doneCallback:function(){var e=this;e.options.loadingIcon&&e.spinner.hide(),e.nonZoomOffset=e.$elem.offset(),e.nonZoomWidth=e.$elem.width(),e.nonZoomHeight=e.$elem.height(),e.currentZoomLevel=e.options.zoomLevel,e.buildZoomLens(),e.zoomContainer.show()},changeZoomLevel:function(e){var t,i,o,n=this,s=!1;n.scrollingLock=!0,n.newvalue=parseFloat(e).toFixed(2),t=parseFloat(e).toFixed(2),i=n.largeHeight/(n.options.zoomWindowHeight/n.nonZoomHeight*n.nonZoomHeight),o=n.largeWidth/(n.options.zoomWindowWidth/n.nonZoomWidth*n.nonZoomWidth),t>=i?(n.heightRatio=n.largeHeight/i/n.nonZoomHeight,n.newvalueheight=i,n.fullheight=!0):(n.heightRatio=n.largeHeight/t/n.nonZoomHeight,n.newvalueheight=t,n.fullheight=!1),t>=o?(n.widthRatio=n.largeWidth/o/n.nonZoomWidth,n.newvaluewidth=o,n.fullwidth=!0):(n.widthRatio=n.largeWidth/t/n.nonZoomWidth,n.newvaluewidth=t,n.fullwidth=!1),s=!0,s&&(n.zoomLock=0,n.changeZoom=!0,n.options.zoomWindowHeight/n.heightRatio<=n.nonZoomHeight&&(n.currentZoomLevel=n.newvalueheight,n.changeBgSize=!0,n.zoomLens.css({height:String(n.options.zoomWindowHeight/n.heightRatio)+"px"})),n.options.zoomWindowWidth/n.widthRatio<=n.nonZoomWidth&&(n.newvaluewidth>n.newvalueheight&&(n.currentZoomLevel=n.newvaluewidth),n.changeBgSize=!0,n.zoomLens.css({width:String(n.options.zoomWindowWidth/n.widthRatio)+"px"}))),n.setPosition(n.currentLoc)}};e.fn.elevateZoom=function(i){return this.each(function(){var o=Object.create(t);o.init(i,this),e.data(this,"elevateZoom",o)})},e.fn.elevateZoom.options={enabled:!0,lensClass:"zoom-lens",zoomContainerId:"zoom-container",zoomWindowContainerClass:"zoom-window-container",zoomWindowClass:"zoom-window",zoomActivation:"hover",preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.05,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColor:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,borderSize:4,showLens:!0,borderColor:"#888",lensBorderSize:1,lensBorderColor:"#000",lensShape:"square",containLensZoom:!1,lensColor:"white",lensOpacity:.4,lenszoom:!1,imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:e.noop,onZoomedImageLoaded:function(){},onImageSwap:e.noop,onImageSwapComplete:e.noop}}(e,window,document)}),define("nord/feature/util/scriptLoader",["jquery"],function(e){function t(t,i){return e.ajax(t,{cache:i.cache,context:i.context,dataType:"script"}).fail(function(){"warn"in window.console&&window.console.warn('scriptLoader: could not load the "'+t+'" script')})}function i(t,i){var o,n,s=new e.Deferred,r=i.containerTagName;return o=document.createElement("script"),n=!1,i.async===!0&&(o.async=!0),o.type="text/javascript",o.src=t,o.onload=o.onreadystatechange=function(){n||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=null,n=!0,s.resolve())},document.getElementsByTagName(r)[0].appendChild(o),s.promise()}function o(o,s){if(!o)throw new Error("scriptLoader: You must specify a URL to load.");return s=e.extend({},n,s),s.useAjax===!0?t(o,s):i(o,s)}var n={async:!0,cache:!0,context:this,useAjax:!1,containerTagName:"head"};return{load:o}}),define("thirdparty/lib/swfobject",[],function(){var e=function(){function t(){if(!q){try{var e=F.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}q=!0;for(var i=Z.length,o=0;i>o;o++)Z[o]()}}function i(e){q?e():Z[Z.length]=e}function o(e){if(typeof N.addEventListener!=L)N.addEventListener("load",e,!1);else if(typeof F.addEventListener!=L)F.addEventListener("load",e,!1);else if(typeof N.attachEvent!=L)w(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){V?s():r()}function s(){var e=F.getElementsByTagName("body")[0],t=v(R);t.setAttribute("type",O);var i=e.appendChild(t);if(i){var o=0;!function(){if(typeof i.GetVariable!=L){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),G.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>o)return o++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,r()}()}else r()}function r(){var e=B.length;if(e>0)for(var t=0;e>t;t++){var i=B[t].id,o=B[t].callbackFn,n={success:!1,id:i};if(G.pv[0]>0){var s=g(i);if(s)if(!b(B[t].swfVersion)||G.wk&&G.wk<312)if(B[t].expressInstall&&l()){var r={};r.data=B[t].expressInstall,r.width=s.getAttribute("width")||"0",r.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(r.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(r.align=s.getAttribute("align"));for(var u={},h=s.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(u[h[f].getAttribute("name")]=h[f].getAttribute("value"));d(r,u,i,o)}else c(s),o&&o(n);else y(i,!0),o&&(n.success=!0,n.ref=a(i),o(n))}else if(y(i,!0),o){var m=a(i);m&&typeof m.SetVariable!=L&&(n.success=!0,n.ref=m),o(n)}}}function a(e){var t=null,i=g(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=L)t=i;else{var o=i.getElementsByTagName(R)[0];o&&(t=o)}return t}function l(){return!U&&b("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function d(e,t,i,o){U=!0,S=o||null,I={success:!1,id:i};var n=g(i);if(n){"OBJECT"==n.nodeName?(k=u(n),x=null):(k=n,x=i),e.id=A,(typeof e.width==L||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var s=G.ie&&G.win?"ActiveX":"PlugIn",r="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+F.title;if(typeof t.flashvars!=L?t.flashvars+="&"+r:t.flashvars=r,G.ie&&G.win&&4!=n.readyState){var a=v("div");i+="SWFObjectNew",a.setAttribute("id",i),n.parentNode.insertBefore(a,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function c(e){if(G.ie&&G.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=v("div");if(G.win&&G.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(R)[0];if(i){var o=i.childNodes;if(o)for(var n=o.length,s=0;n>s;s++)1==o[s].nodeType&&"PARAM"==o[s].nodeName||8==o[s].nodeType||t.appendChild(o[s].cloneNode(!0))}}return t}function h(e,t,i){var o,n=g(i);if(G.wk&&G.wk<312)return o;if(n)if(typeof e.id==L&&(e.id=i),G.ie&&G.win){var s="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?s+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(s+=" "+r+'="'+e[r]+'"'));var a="";for(var l in t)t[l]!=Object.prototype[l]&&(a+='<param name="'+l+'" value="'+t[l]+'" />');
n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+a+"</object>",D[D.length]=e.id,o=g(e.id)}else{var d=v(R);d.setAttribute("type",O);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?d.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&d.setAttribute(c,e[c]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&p(d,u,t[u]);n.parentNode.replaceChild(d,n),o=d}return o}function p(e,t,i){var o=v("param");o.setAttribute("name",t),o.setAttribute("value",i),e.appendChild(o)}function f(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(G.ie&&G.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=g(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=F.getElementById(e)}catch(i){}return t}function v(e){return F.createElement(e)}function w(e,t,i){e.attachEvent(t,i),H[H.length]=[e,t,i]}function b(e){var t=G.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function _(e,t,i,o){if(!G.ie||!G.mac){var n=F.getElementsByTagName("head")[0];if(n){var s=i&&"string"==typeof i?i:"screen";if(o&&(z=null,T=null),!z||T!=s){var r=v("style");r.setAttribute("type","text/css"),r.setAttribute("media",s),z=n.appendChild(r),G.ie&&G.win&&typeof F.styleSheets!=L&&F.styleSheets.length>0&&(z=F.styleSheets[F.styleSheets.length-1]),T=s}G.ie&&G.win?z&&typeof z.addRule==R&&z.addRule(e,t):z&&typeof F.createTextNode!=L&&z.appendChild(F.createTextNode(e+" {"+t+"}"))}}}function y(e,t){if(M){var i=t?"visible":"hidden";q&&g(e)?g(e).style.visibility=i:_("#"+e,"visibility:"+i)}}function C(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}{var k,x,S,I,z,T,L="undefined",R="object",P="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",A="SWFObjectExprInst",E="onreadystatechange",N=window,F=document,j=navigator,V=!1,Z=[n],B=[],D=[],H=[],q=!1,U=!1,M=!0,G=function(){var e=typeof F.getElementById!=L&&typeof F.getElementsByTagName!=L&&typeof F.createElement!=L,t=j.userAgent.toLowerCase(),i=j.platform.toLowerCase(),o=/win/.test(i?i:t),n=/mac/.test(i?i:t),s=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,a=[0,0,0],l=null;if(typeof j.plugins!=L&&typeof j.plugins[P]==R)l=j.plugins[P].description,!l||typeof j.mimeTypes!=L&&j.mimeTypes[O]&&!j.mimeTypes[O].enabledPlugin||(V=!0,r=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=L)try{var d=new ActiveXObject(W);d&&(l=d.GetVariable("$version"),l&&(r=!0,l=l.split(" ")[1].split(","),a=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:a,wk:s,ie:r,win:o,mac:n}}();!function(){G.w3&&((typeof F.readyState!=L&&"complete"==F.readyState||typeof F.readyState==L&&(F.getElementsByTagName("body")[0]||F.body))&&t(),q||(typeof F.addEventListener!=L&&F.addEventListener("DOMContentLoaded",t,!1),G.ie&&G.win&&(F.attachEvent(E,function(){"complete"==F.readyState&&(F.detachEvent(E,arguments.callee),t())}),N==top&&!function(){if(!q){try{F.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),G.wk&&!function(){return q?void 0:/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),o(t)))}(),function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var t=H.length,i=0;t>i;i++)H[i][0].detachEvent(H[i][1],H[i][2]);for(var o=D.length,n=0;o>n;n++)f(D[n]);for(var s in G)G[s]=null;G=null;for(var r in e)e[r]=null;e=null})}()}return{registerObject:function(e,t,i,o){if(G.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=o,B[B.length]=n,y(e,!1)}else o&&o({success:!1,id:e})},getObjectById:function(e){return G.w3?a(e):void 0},embedSWF:function(e,t,o,n,s,r,a,c,u,p){var f={success:!1,id:t};G.w3&&!(G.wk&&G.wk<312)&&e&&t&&o&&n&&s?(y(t,!1),i(function(){o+="",n+="";var i={};if(u&&typeof u===R)for(var m in u)i[m]=u[m];i.data=e,i.width=o,i.height=n;var g={};if(c&&typeof c===R)for(var v in c)g[v]=c[v];if(a&&typeof a===R)for(var w in a)typeof g.flashvars!=L?g.flashvars+="&"+w+"="+a[w]:g.flashvars=w+"="+a[w];if(b(s)){var _=h(i,g,t);i.id==t&&y(t,!0),f.success=!0,f.ref=_}else{if(r&&l())return i.data=r,void d(i,g,t,p);y(t,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){M=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return G.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,o){G.w3&&l()&&d(e,t,i,o)},removeSWF:function(e){G.w3&&f(e)},createCSS:function(e,t,i,o){G.w3&&_(e,t,i,o)},addDomLoadEvent:i,addLoadEvent:o,getQueryParamValue:function(e){var t=F.location.search||F.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var i=t.split("&"),o=0;o<i.length;o++)if(i[o].substring(0,i[o].indexOf("="))==e)return C(i[o].substring(i[o].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=g(A);e&&k&&(e.parentNode.replaceChild(k,e),x&&(y(x,!0),G.ie&&G.win&&(k.style.display="block")),S&&S(I)),U=!1}}}}();return e}),define("nord/featureSet/imageZoom",["jquery","thirdparty/lib/swfobject","nord/config"],function(e,t,i){function o(){var e,t,o=d.find("button.selected"),a=i.getValue("product"),u=d.find(".image-thumb"),h=u.find("button").first();if(o.length)switch(o.parent().data("thumbType")){case"image":t=o.data("imgId")}else{try{e=a.selectedSku.color}catch(p){console.error("Unable to find currently selected sku")}e?t=n(e):1===u.length&&(h.addClass(m),t=h.data("imgId"))}t&&r(t),s(),l(c.find("img").attr("src"))}function n(t){var i,o,n=e("#color-swatch button"),s=t.toLowerCase();return n.each(function(e){return i=n.eq(e),i.val().toLowerCase()===s?(o=+i.parent().data("imgId"),!1):void 0}),o}function s(){d.on("click.videoThumb","button",function(){var t=e(this);t.hasClass(m)===!1&&(h.each(function(){var t=e(this),i=t.find("img");i.length&&(t.hasClass("image-thumb")||t.hasClass("product-video-thumb")&&i.attr("alt").indexOf(" Selected")>-1)&&i.attr("alt",i.attr("alt").replace(" Selected",""))}),t.find("img").attr("alt",t.find("img").attr("alt")+" Selected"),p.addClass(f),t.parent().hasClass("image-thumb")&&(h.find("button").removeClass(m),t.addClass(m),r(t.data("imgId"))))})}function r(t){var i=e("#zoom-container"),o=e("#product-video"),n=e("#image-viewer .image-controls");i.removeClass(f),c.removeClass(f),o.addClass(f),u.addClass(f),n.removeClass(f);var s=d.find('button[data-img-id="'+t+'"]').length?d.find('button[data-img-id="'+t+'"]'):e("#color-swatch").find('li[data-img-id="'+t+'"]');a(s)}function a(t){var o=c.find("img"),n=(t.data("imgId"),t.parent(),i.getValueOrDefault("urls.gallery")),s={borderColor:"#E7E7E7",borderSize:1,cursor:"pointer",easing:!0,easingAmount:3,imageCrossfade:100,lensFadeIn:100,lensFadeOut:100,maxZoomLevel:1.3,minZoomLevel:1,scrollZoom:!e("html").hasClass("lt-ie9"),zoomLevel:1.3,zoomWindowFadeIn:100,zoomWindowFadeOut:100,zoomWindowHeight:360,zoomWindowWidth:345},r=n+t.data("imgFilename"),a=""!==t.data("imgZoomFilename")?n+t.data("imgZoomFilename"):"",d=e("#image-viewer .image-controls"),u=d.find(".control-zoom"),p=d.find(".control-gigantic");""!==t.data("imgFilename")&&(h.find("button").removeClass(m),""===t.data("imgGiganticFilename")?p.addClass(f):p.removeClass(f),""===t.data("imgZoomFilename")?u.addClass(f):u.removeClass(f),o.data("gigantic-image",n+t.data("imgGiganticFilename")),t.addClass(m),o.data("elevateZoom")?o.data("elevateZoom").swaptheimage(r,a):""!==a?(o.attr("src",r).data("zoomImage",a),o.elevateZoom(s)):o.attr("src",r),l(c.find("img").attr("src")))}function l(t){var i=e("head"),o=i.find('meta[property="og:image"]'),n=i.find('link[rel="image_src"]');o.length?o.attr("content",t):i.append('<meta property="og:image" content="'+t+'">'),n.length?n.attr("href",t):i.append('<link rel="image_src" href="+t+">')}var d=e("#image-zoom"),c=e("#product-image"),u=e("#vendor-video"),h=d.find("li"),p=e("#zoom-container"),f="hidden",m="selected";return{init:o,updateProductImage:r}}),define("nord/feature/productPage/imageViewer",["jquery","nord/feature/productPage/jquery.elevateZoom","nord/feature/util/scriptLoader","nord/config","nord/featureSet/imageZoom","nord/feature/dialog/modal"],function(e,t,i,o,n,s){function r(){n.init(),(l.find("li.vendor-video-thumb").length||l.find("li.product-video-thumb").length)&&require(["nord/featureSet/productVideo"],function(e){e.init()}),"complete"===document.readyState?a():e(window).on("load",a),u.on("click.viewImage",function(){var t=(e(this),d.find("img").data("gigantic-image")),i=e("#modal-gigantic-image"),o=s.create(i,{theme:"light",minHeight:920,minWidth:660});o.show(),i.attr("src",t).removeClass(h)})}function a(){var t=!1;if(t){var i=c.find("button").filter(function(){return e(this).parent().hasClass("image-thumb")}),o=[];i.each(function(){var t=e(this).data(e(this).hasClass("selected")?"zoomImage":"largeImage");o.push('<img id="thumb-'+e(this).data("imgId")+'" src="+t+" class="thumb-hidden"/>')}),l.prepend(o.join(""))}}var l=e("#image-zoom"),d=e("#product-image"),c=(e("#vendor-video"),l.find("li")),u=e("#image-viewer .larger-image"),h="hidden";return{init:r}}),define("text!htmlTemplate/product/holiday-shipping-modal-content.html",[],function(){return"<div class=\"holiday-shipping-modal\">\n	<h2>Need It By Christmas Eve?</h2>\n	<p>\n		We'll ship almost anything on our site to anywhere in the United States for <strong>FREE</strong>. \n		Simply select a size and color to see if it's available for delivery by December 24.\n	</p>\n</div>\n"}),define("text!htmlTemplate/product/holiday-shipping-default.html",[],function(){return'<h2>Need it by Christmas Eve?</h2>\n<p>\n	Select a size to confirm that this item is available for delivery by December 24 via free Standard Shipping. \n	<button type="button" class="open-holiday-shipping-modal link-button">Learn more</button>.\n</p>'}),define("text!htmlTemplate/product/holiday-shipping-available.html",[],function(){return'<h2>This will arrive by Christmas Eve.</h2>\n<p>\n	Your selection{{{selection}}} is <strong>available</strong> for delivery by December 24. \n	Select Standard Shipping at Checkout. <button type="button link-button" class="open-holiday-shipping-modal">Learn more</button>.\n</p>'}),define("text!htmlTemplate/product/holiday-shipping-unavailable.html",[],function(){return'<h2>This won&apos;t arrive by Christmas Eve</h2>\n<p>\n	Your selection{{{selection}}} is <strong>not available</strong> for delivery by December 24 via Free Standard Shipping. \n	<button type="button" class="open-holiday-shipping-modal link-button">Learn more</button>.\n</p>'}),define("nord/feature/productPage/holidayShippingGuide",["jquery","mustache","nord/config","nord/feature/util/cookie","nord/feature/dialog/modal","text!htmlTemplate/product/holiday-shipping-modal-content.html","text!htmlTemplate/product/holiday-shipping-default.html","text!htmlTemplate/product/holiday-shipping-available.html","text!htmlTemplate/product/holiday-shipping-unavailable.html"],function(e,t,i,o,n,s,r,a,l){function d(){w&&(u=e(m),h=e(t.render(s)),b=!0,c())}function c(i,o){w&&b&&(f=r,i&&(f=o?a:l,i=", <strong>"+i+"</strong>,"),u.html(t.render(f,{selection:i})),e(g).on("click.holidayShipping",function(){p=p||n.create(h,v),p.show()}))}var u,h,p,f,m="#holiday-shipping",g=".open-holiday-shipping-modal",v={theme:"light",minHeight:81,minWidth:440},w=i.getValue("features.isEadOverrideFCEnabled"),b=!1;return d(),{update:c}}),define("nord/feature/util/stringUtils",[],function(){function e(e){var t=arguments;return e.replace(/{(\d+)}/g,function(e,i){return i++,"undefined"!=typeof t[i]?t[i]:e})}return{format:e}}),define("nord/feature/productPage/customerChoice",["jquery","nord/feature/dialog/modal","nord/feature/productPage/shippingReturns","nord/feature/productPage/holidayShippingGuide","nord/feature/util/keyCode","nord/feature/util/arrayUtils","nord/config","nord/feature/dialog/popover","nord/feature/util/stringUtils"],function(e,t,i,o,n,s,r,a,l){function d(){M.available&&(g(),a.init(G.find(".button")),b(M.useChoiceGroupSelector),p(),W()),c(),u()}function c(){var i=e(".quantity-box");i.on("input.quantity",function(t){var i=t.which,o=e(this),s=parseInt(e(this).attr("maxlength"),10);if(h(),i!==n.backspace&&i!==n.del&&i!==n.tab&&i!==n.tab&&i!==n.enter&&(65!==i||t.ctrlKey!==!0)&&i!==n.home&&i!==n.end&&i!==n.left&&i!==n.right&&i!==n.up&&i!==n.down)if(!t.shiftKey&&i>47&&58>i||i>95&&106>i){if(!(o.val().length>=s))return;t.preventDefault()}else t.preventDefault()}),i.on("change.quantity",function(){var t=parseInt(e(this).val(),10);(1>t||!t)&&e(this).val(1),h()}),B.find("#color-swatch li").length&&require(["nord/featureSet/imageZoom"],function(t){function i(i,o){var n=e("#"+i),s=B.find(".selected"),r=e("#color-selection").find(".wai-selected .selected");if(0>i){if(r.text(""),!s.length||!o)return S("#color-buttons","selected"),S("#size-buttons","dotted"),S("#width-buttons","dotted"),v(),b(),p(),e("#color-option").text("None Selected").removeClass("option-value").addClass("option-value-none"),void e("#back-order").hide();n=s,n.data("selected",!0)}else r.text(D.find("option:selected").text());S("#color-buttons","selected"),n.addClass("selected").removeData("selected"),b(),t.updateProductImage(n.data("imgId")),p()}B.on("click.swatch",".button",function(){var t=e(this),o=t.attr("id"),n=t.data("colorCode"),s=D.find("option[value="+o+"]");s.length?s.prop("selected",!0):D.val("-1"),i(o,!0),k(n)}),D.on("change.colorselector",function(){i(e(this).val(),!1)})}),U.on("click.buttonSelection",".button",function(){var t=e(this),i=t.parent().find("button"),o=e(this).closest("div"),n=o.attr("id"),s=t.find(".option-label").val(),r=G.find(".tooltip");r.hasClass("active")&&a.close(r),t.parents("#width-selection").length?e("#width-selection").find(".wai-selected .selected").text(s):t.parents("#size-selection").length&&e("#size-selection").find(".wai-selected .selected").text(s),v(),o.find(".button").removeClass("selected"),t.removeClass("mouse-over"),t.addClass("selected"),i.each(function(){var t=e(this),i=t.find(".ada-selected");i.text(i.text().replace(" selected","")),t.parent().hasClass("selected")&&i.text(i.text()+" selected")}),"value-buttons"!==n&&b(),p()}).on("mouseenter.buttonSelector",".button",function(){e(this).hasClass("dotted")||e(this).addClass("mouse-over"),e(this).find("label").css("text-decoration","underline")}).on("mouseleave.buttonSelector",".button",function(){e(this).removeClass("mouse-over"),e(this).find("button").css("text-decoration","none")}),G.on("click.unavailable","li.dotted",function(){var t,i,o=e(this).outerWidth(),n=e("#tooltip-unavailable-item"),s=e("#unavailable-item-waitlist"),r=e("#unavailable-item-detail"),a=e(this).position(),l=!(!s.length||!N.areAllOptionsSelected);s.toggleClass(Y,!l),r.toggleClass(Y,l),t=a.top-n.height()-$,i=a.left+o/2-n.width()/2+5,n.css({top:t+"px",left:i+"px"}).show()}),J.find(".learn-more").removeClass(Y).on("click.giftOptions",function(e){var i=J.find(".gift-options-modal").html(),o=t.create(i,{theme:"light"});e.preventDefault(),o.show()})}function u(){U.find(".button.selected").trigger("click.buttonSelection")}function h(){var t=e("#quantity"),i=t.find(".quantity-alert-message");i.length&&!i.hasClass(Y)&&(i.addClass(Y),t.find(".quantity-box").removeClass("error"))}function p(){J.find(".gift-options-select");O(),T(),N.skuId>0?f():v(),I(),R(),i.updateShippingReturns()}function f(){var t=e("#gift-options"),i=t.find(".gift-options-select");i.addClass(Y),m(1!==N.skuId&&N.skuAvailable?N.giftOptions?"on":"off":"off")}function m(e){var t=J.find(".gift-options-on"),i=J.find(".gift-options-off"),o=J.find(".gift-options-select");switch(e){case"on":t.removeClass(Y),i.addClass(Y);break;case"off":t.addClass(Y),i.removeClass(Y);break;default:t.addClass(Y),i.addClass(Y),o.removeClass(Y)}}function g(){var e=M.useChoiceGroupSelector?x():"";N={backOrder:null,skuAvailable:!0,size:"",color:"",width:"",value:"",colorId:"",skuId:-1,channelId:-1,choiceGroup:e,areAllOptionsSelected:!1},M.selectedSku=N}function v(){var e=J.find(".gift-options-select");N.skuId=-1,N.backOrder=null,N.skuAvailable=!0,N.channelId=-1,M.selectedSku=N,e.length&&m("select"),h()}function w(e,t){if(e.length){var i,o=e.find(".button.selected"),n=o.find("button");return t&&o.length?i=o.attr("id").split("-")[1]:n.length&&(i=n.val()),i}}function b(t){var i,o,n,s,r,a,l,d=[],c=[],u=[],h=w(V,!1),p=+w(B,!0),f=w(Z,!1),m=G.find(".button"),g=U.find(".button.selected").length,v=x(),b=V.length&&p&&f,k=B.length&&h&&f,S=Z.length&&h&&p,I=b||S||k,z=G.find("button"),T=" unavailable",L="dotted",R='[data-sizeValue="{0}"]',P="#color-{0}",W="#width-id-{0}",O=t||!1,A=p||f||O,E=h||f||O,N=h||p||O;if(m.removeClass("js-popover-link"),!g&&!v)return void m.removeClass(L);for(s=0;s<M.skus.length;s++)if(M.skus[s].available&&(!v||M.skus[s].choiceGroup===v)){if(i=M.skus[s].size,o=M.skus[s].width,n=+M.skus[s].colorId,v){if(!g){y(c,n),y(d,i),y(u,o);continue}!p||h||f||y(c,n),!h||p||f||y(d,i),!f||h||p||y(u,o)}h&&i===h&&(y(c,n,k),y(u,o,S)),f&&o===f&&(y(c,n,k),y(d,i,b)),p&&n===p&&(y(d,i,b),y(u,o,S)),I&&(b&&o===f&&n===p&&d.push(i),S&&i===h&&n===p&&u.push(o),k&&i===h&&o===f&&c.push(n))}_(V,L,R,d,A,O),_(B,L,P,c,E,O),_(Z,L,W,u,N,O),c.length&&(p=+w(B,!0),C(c,p)),G.find(".dotted").addClass("js-popover-link").attr("data-popover-id","tooltip-unavailable-item"),z.each(function(){a=e(this),l=a.find(".ada-selected"),l.text(l.text().replace(T,""))}),r=G.find("."+L+" button"),r.each(function(t,i){i=e(this),l=i.find(".ada-selected"),-1===l.text().indexOf(T)&&l.text(l.text()+T)})}function _(e,t,i,o,n,s){var r=0;if(n&&(e.find(".button").addClass(t),o.length)){for(r;r<o.length;r++)e.find(l.format(i,o[r])).removeClass(t);1===o.length&&s&&(e.find(l.format(i,o[0])).addClass("selected"),-1!==i.indexOf("color")&&D.find("option[value=color-"+o[0]+"]").prop("selected",!0))}}function y(e,t,i){!i&&t&&-1===e.indexOf(t)&&e.push(t)}function C(e,t){var i,o,n=[],s=!1,r="color-"+t;for(D.empty(),n.push(q[0]),i=1;i<q.length;i++)o=parseInt(q[i].value.split("-")[1],10),-1!==e.indexOf(o)&&n.push(q[i]);D.append(n),D.find("option").each(function(){return this.removeAttribute("selected"),this.value===r?(s=!0,!1):void 0}),D.val(s?r:"-1")}function k(e){H.filter('[data-color-code="'+e+'"]').first().addClass("selected")}function x(){return e("#price input[name=price-filter]:checked").val()}function S(t,i){e(t).closest("div").find(".button").removeClass(i)}function I(){var t=e("#back-order");N.backOrder&&"preorder"!==M.promotion?(t.show(),F+=", has an approximate ship date of "+N.backOrder,t.find(".back-order-details").text(F),e("#ead, #sdd, #bopus").addClass(Y)):(t.hide(),e("#ead, #sdd, #bopus").removeClass(Y))}function z(e,t,i,o,n){i&&(e.push(o),""!==n&&t.push(o+": "+n))}function T(){var t=V.length,i=Z.length,o=B.length,n=e("#value-buttons").length,s=[],r=[],a=null;for(z(s,r,t,"Size",N.size),z(s,r,i,"Width",N.width),z(s,r,o,"Color",N.color),z(s,r,n,"Value",N.value),j="",a=0;a<r.length;a++)0===a?j+=r[a]:(j+=r.length===a+1?" and ":", ",j+=r[a]);j=""!==j?"Your selection, <strong>"+j+"</strong>,":"Your selection",t&&o&&i&&(F="Size: "+N.size+", Width: "+N.width+", Color: "+N.color),t&&o&&!i&&(F="Size: "+N.size+", Color: "+N.color),t||!o||i||(F="Color: "+N.color),!t||o||i||(F="Size: "+N.size)}function L(){g(),b(!0),O(),I(),i.updateShippingReturns()}function R(){var e;N&&(e=1!==N.skuId&&N.skuAvailable,N.areAllOptionsSelected?o.update(j,e):o.update())}function P(e,t,i){var o=e.find(".button.selected"),n=o.find("button"),s="colorId"===t;e.length&&(N[t]=w(e,s)||"","colorId"===t&&(o.length?N.color=n.val():(D.val("-1"),N.color="")),i.skuAvailable=!o.hasClass("dotted")&&i.skuAvailable,i.optionAllSelected=""!==N[t]&&i.optionAllSelected)}function W(){var t="data-background-color";e("["+t+"]").each(function(){var i=e(this);i.css("background-color",i.attr(t))})}function O(){var t=e("#value-buttons"),i=M.skus[0],o={skuAvailable:!0,optionAllSelected:!0},n=e('#price input[type="radio"]:checked');return n.length&&(N.priceGroup=n.next("label").text()),V.length||B.length||t.length?(P(V,"size",o),P(B,"colorId",o),P(Z,"width",o),P(t,"value",o),o.skuAvailable||(N.skuAvailable=o.skuAvailable,N.skuId=1),N.areAllOptionsSelected=o.optionAllSelected,o.optionAllSelected&&o.skuAvailable?void A(N.colorId,N.size,N.width,N.value):void(M.selectedSku=N)):(N.skuId=i.id,N.skuAvailable=i.available,N.channelId=i.channelId,""!==i.backOrder&&(N.backOrder=E(i.backOrder)),void(M.selectedSku=N))}function A(e,t,i,o){var n,s=x();if(""!==e||""!==t||""!==i||""!==o){for(n=0;n<M.skus.length;n++)(""===t||M.skus[n].size===t)&&(s&&M.skus[n].choiceGroup!==s||(""===e||+M.skus[n].colorId===+e)&&(""===i||M.skus[n].width===i)&&(""===o||M.skus[n].value===o)&&(N.skuId=M.skus[n].id,N.backOrder=""!==M.skus[n].backOrder?E(M.skus[n].backOrder):null,N.skuAvailable=M.skus[n].available,N.channelId=M.skus[n].channelId,N.price=M.skus[n].price,N.rmsSkuId=M.skus[n].rmsSkuId,N.photoGroupId=M.skus[n].photoGroupId,N.giftOptions=M.skus[n].giftOptions,N.choiceGroup=M.skus[n].choiceGroup));M.selectedSku=N}}function E(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e);return t[i.getMonth()]+" "+i.getDate()+", "+i.getFullYear()}var N,F,j,V=e("#size-buttons"),Z=e("#width-buttons"),B=e("#color-buttons"),D=e("#color-selector"),H=e(".image-thumb button"),q=D.find("option").get(),U=e("#size-buttons, #width-buttons, #color-buttons, #value-buttons"),M=r.getValue("product"),G=e("#customizations"),$=15,Y="hidden",J=e("#gift-options");return{init:d,updatePageWithPriceFilter:L}}),define("nord/feature/productPage/handleLegacyPopup",["jquery","nord/config"],function(e,t){function i(){var t,i,l,d=e('a[href*="'+r+'"]');for(t=0;t<d.length;t++)i=d.eq(t),l=o(i.attr("href")),l=l.replace(n,a,"g").replace(s,a,"g").replace("'","","g"),i.removeAttr("style").addClass("js-popup-link").attr("href",l)}function o(e){var t=e.match(/openPopUp\((['"])?(.*?)\1[,)]/);return t?t[2]:e}var n="[-% About %-]",s=/PageParameters.aboutUrl\s*\+\s*(['"])/,r="openPopUp(",a=t.getValue("urls.about");i()}),define("nord/feature/productPage/price",["jquery","nord/feature/dialog/modal","nord/feature/productPage/customerChoice"],function(e,t,i){function o(){r(),s()}function n(e,t){return e.replace(d,t)}function s(){var o=a.find(".price-learn-more");o.on("click.priceSuppression",function(){var e=a.find(".price-explanation").text(),i=t.create(e,{theme:"light"});i.show()}),l.on("click.priceFilter",function(){var t=e(this),o=n(t.val(),"_"),s=e("#size_filter_"+o),r=e("#size-buttons"),a=e("#width-buttons"),l=e("#color-buttons"),d=l.find("#color-swatch"),c=n(t.val(),"-").toLowerCase(),u=e("#color-swatch-"+c);s.removeClass("hidden").siblings().addClass("hidden"),r.find("li.selected, li.dotted").removeClass("selected dotted"),l.length&&l.find("li.selected, li.dotted").removeClass("selected dotted"),a.length&&a.find("li.selected, li.dotted").removeClass("selected dotted"),u.find(".selected").removeClass("selected"),d.html(u.html()),d.find("li").each(function(){var t=e(this);t.attr("id",t.data("id")).removeData("id")}),i.updatePageWithPriceFilter()})}function r(){var t="",i="",o="";l.length&&(t=a.find("input[name=price-filter]:checked").val(),o=n(t,"_"),i=e("#size_filter_"+o).removeClass("hidden").siblings().addClass("hidden"))}var a=e("#price"),l=a.find("input[name=price-filter]"),d=/[^\w-]+/g;return{init:o}}),define("text!htmlTemplate/dialog/popoverBuyButton.html",[],function(){return'<aside id="popover-buy-button" class="popover error">\n	<button type="button" class="popover-close">Close</button>\n	<div class="popover-content-wrapper">\n		<div class="popover-content">\n			<div class="add-to-bag-error">\n				<div class="popover-header alert-message"></div>\n				<p class="alert-detail"></p>\n				<ul class="alert-item-detail"></ul>\n			</div>\n			<div class="alert-buttons"></div>\n		</div>\n	</div>\n</aside>'}),define("nord/feature/productPage/buyButton",["jquery","nord/feature/dialog/popover","nord/config","nord/feature/util/cookie","nord/feature/dialog/modal","text!htmlTemplate/dialog/popoverBuyButton.html","nord/feature/util/querystring"],function(e,t,i,o,n,s,r){function a(){I(),t.init(R),S(),l()}function l(){var t=e("#add-to-shopping-bag-button"),i=e("#add-to-wish-list-button");t.add(i).on("click.buyButton",function(){var t,i=e(this),o="add-to-shopping-bag-button"===i.attr("id"),n=o?"shopping":"wish",s="",r="",a=z.find(".alert-detail"),l=z.find(".alert-message"),d=P.find("input[aria-required=True]"),f="",v='<button id="cancel-button" class="button button-small">Cancel</button>',w='<button id="ok-button" class="'+n+'">OK</button>',b=!0,_="",y=e(".personalization-item"),C=c();if(z.hide(),o||!F){if(S(),L.skuId<0)return t=h(),l.text(B.replace("{0}",t)),a.text(D.replace("{0}",t)),void u("",f,i,o);if(L.backOrder)return r="preorder"===N.promotion?"Pre-ordered Item:":"Backordered Item:",l.text(r),a.text(Z.replace("{0}",L.backOrder)),s="<li>"+N.brandName+" "+N.productName+"</li>",s+=p(!1,!0,"item-alert-label"),f=w+v,void u(s,f,i,o);if(!L.skuAvailable)return a.text(""),l.text(H),s+=p(!0,!1,"not-available"),_=N.waitlistEligible?j+V:j,s+="<li class='not-available-statement'>"+_+"</li>",void u(s,f,i,o);if(y.length)return l.text(q),a.text(U),s="<li>Name:"+y.find("input").val().toLowerCase()+"</li>",f=w+v,void u(s,f,i,o);if(N.isInsuredStyle)return l.text(M),a.text(G),s="<li>"+N.brandName+" "+N.productName+"</li>",s+=p(!1,!0,"insured"),f=w+v,void u(s,f,i,o);if(A.length&&+A.data("quantity-limit")<C)return A.removeClass("hidden"),void O.addClass("error");d.each(function(){switch(e(this).data("format")){case"email":b=e(this).triggerHandler("focusout.email");break;case"confirm":b=e(this).triggerHandler("focusout.confirmEmail");break;case"phone":b=e(this).triggerHandler("focusout.phoneNumber");break;default:b=!1,console.log("Required Data Type Not Found!")}return b?void 0:!1})}b&&(o?m():g())}),t.add(i).on("mouseover.buyButton",function(){e(this).addClass("mouse-over")}).on("mouseout.buyButton",function(){e(this).removeClass("mouse-over")}),R.on("click.closeCancelPopover",".popover-close, #cancel-button",d),e(document).on("click.closeCancelPopover",d),R.on("click.ok","#ok-button",function(){e(this).hasClass("shopping")?m():g(),d()}),e("#available-store-list").on("click.buyOnlinePickUp",".buy-online-and-pick-up",function(){var t=e(this).data("store-id").split("_");$.corporateStoreId=t[0],$.storeNumber=t[1],$.zip=e("#zip-code-entered-value").text(),$.radius=e("#within-radius").text(),S(),m(!0)})}function d(){e(".popover").hide()}function c(){return+O.val()||1}function u(e,t,i,o){var n,s,r=i.width(),a=i.position(),l=a.top,d=a.left;e.length>0?z.find(".alert-item-detail").html(e).removeClass("hidden"):z.find(".alert-item-detail").addClass("hidden"),t.length>0?T.html(t).removeClass("hidden"):T.addClass("hidden"),n=l-z.height()-15,o?(z.addClass("shopping-bag").removeClass("wish-list"),s=d-(z.width()-r)+25):(z.addClass("wish-list").removeClass("shopping-bag"),s=d),z.css({top:n+"px",left:s+"px"}).show()}function h(){var t,i,o,n=[],s=["size","width","color","value"],r=null;for(r=0;r<s.length;r++)o=s[r],i=e("#"+o+"-buttons"),"size"===o&&(i=i.find("button")),i.length&&n.push(o);return n.length>2?t="size, width or color":n.length>0&&(t=void 0===n[1]?n[0]:n[0]+" or "+n[1]),t}function p(e,t,i){var o="",n="<li><span class="+i+">",s=L.size+(N.useChoiceGroupSelector?" "+L.choiceGroup:"");return L.size&&(o=n+"Size: </span>"+s+"</li>",L.width&&(e?o+=n+"Width: </span>"+L.width+"</li>":o=n+"Size & Width: </span>"+s+" "+L.width+"</li>")),L.color&&(o+=n+"Color: </span>"+L.color+"</li>"),t&&(o+=n+"Price: </span>"+L.price+"</li>"),o}function f(e,t){e.prop("disabled",t)}function m(t){if(!i.getValue("features.isBuyButtonSuppressEnabled")){var n=C(t,!1),s=e("#shopping-bag-count"),r=e("#add-to-shopping-bag-button");f(r,!0),e.ajax({type:"POST",url:"/mb/Add",dataType:"json",data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(t){o.setValue(E,"bagcount",t.ShoppingBagCount),e("#mini-bag-section").addClass("active"),s.length&&s.text(t.ShoppingBagCount),e(document).trigger("update.miniBag",t),f(r,!1)},error:function(){console.log("Add to shopping bag service not available")}})}}function g(){if(!i.getValue("features.isBuyButtonSuppressEnabled")){var t=C(!1,F),o=encodeURIComponent(document.location.toString()),s=e("#add-to-wish-list-button");f(s,!0),e.ajax({type:"POST",url:"/bb/AddToWishlist?styleURL="+o,dataType:"json",data:t,header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(t){var i="",o="",r="",a=R.find("#add-to-wish-list-modal");return f(s,!1),t.args&&t.args.redirectUrl?void((window.parent?window.parent:window).location=t.args.redirectUrl):(r=t.htmlContent.replace(/\r\n/g,""),a.html(r),e("#continueShoppingLinkButton").addClass("button-medium button-standard"),e("#viewWishListLinkButton").addClass("button-medium button-primary"),i=a.html(),o=n.create(i,{theme:"light"}),void o.show())},error:function(){console.log("Add to wish list service not available")}})}}function v(){var t=N.fitRecommendation;return t.shoeFitrEligible?"Shoefitr"+t.shoeFitrRecommendation+t.shoeFitrId:e(".tfc-fitrec-result.success").length?"truefit":t.consumerInsightEligible&&t.CIRecommendedSize?"ConsumerInsights":void 0}function w(e,t){var i,o,n,s,r,a;for(n=decodeURIComponent(t).split("&"),r=0;r<n.length;r++)if(s=n[r].split("="),"FILTERSTATE"===s[0]){o=decodeURIComponent(decodeURIComponent(s[1]).split("&")).split(",");break}if(o)for(r=0;r<o.length;r++)switch(i=o[r].split("="),a=i[1],i[0].toLowerCase()){case"names":e.names=a.split("|");break;case"values":e.values=a.split("|");break;case"sort":e.sort=a;break;case"page":e.page=a}return e}function b(e){var t,i,o=r.deserialize(document.location.search).fashionColor;return i=e.names.indexOf("Color"),i>-1&&(t=e.values[i].trim()),t&&o?"Color Expose by Swatch and Filter":t?"Color Expose by Filter":o?"Color Expose by Swatch":""}function _(){var e,t,o=r.deserialize(document.location.search).origin,n=i.getValue("product.categoryName");if(o&&(t=o.split("-"),t.length>=6&&(e=t[5])),"1"===e||"2"===e)return"Product Page";if(o&&"relatedshoppingbag"===o.split("-")[0])return"Shopping Bag";switch(n){case"Men":return"Mens DLP";case"Beauty+%26+Fragrance":return"Beauty LP";case"HomePage":return"Home Page";case"Dresses":return"Womens Dresses LP";case"Outerwear+%26+Jackets":return"Womens Outerwear and Jackets LP";case"Plus":return"Womens Plus LP";case"Denim":return"Womens Denim LP";default:return""}}function y(e){var t,i=!1;if(e.consumerInsightEligible&&""!==e.CIRecommendedSize)t="ConsumerInsights",i=e.CIRecommendedSize===L.size;else if(e.truefitEligible&&""!==e.truefitRecommendation)t="TrueFit",i=e.trueFitRecommendation===L.size;else{if(!e.shoeFitrEligible||""===e.shoeFitrRecommendedSize)return"N/A";t="ShoeFitr",i=e.shoeFitrRecommendedSize===L.size}return t+"-"+(i?"Yes":"No")}function C(t,o){var n,s=P.length?x():[],r=i.getValue("analytics"),a=i.getValue("product"),l=c(),d=e("#color-buttons").find("li.selected img").attr("src"),u=o?0:L.skuId,h=o?0:L.rmsSkuId,p=[],f={OrderItemId:0,SkuId:u,SiteLocationId:"",RmsSkuId:h,StyleId:a.styleId,OutfitStyleNumber:null,Affiliate:v(),ColorId:L.colorId,PhotoGroupId:L.photoGroupId,ImgUrl:d,NewQuantity:l,Customizations:s},m=[],g=i.getValue("page.pageObj.isProd")?"session":"sessiondev",C=k(g),S={names:[],values:[],sort:"",page:0,color:""},I=a.fitRecommendation,z="TFIT - ";return C&&(S=w(S,C)),z+=I.trueFitEligible?void 0!==I.trueFitRecommendation?"YES":"NO":"NA",n=I.shoeFitrEligible?""!==I.shoeFitrRecommendedSize?"YES":"NO":"N/A",m=[r.categoryId,a.averageProductRating,a.totalReviews,a.recommendedPercentage,n,"","","","Sale "+(a.onSale?"Y":"N"),a.brandName,S.names.join("|"),S.values.join("|"),S.sort+" - P."+S.page,"Base Style",z,"","","","",a.productVideoAvailable?"Y":"N",b(S),"","","","",_(),"","","","","",L.skuId,L.size,L.width,L.color,"","",y(I),a.fitRecommendation.consumerInsightEligible?"Y":"N"],f.SiteLocationId=m.join("*"),t&&e.extend(f,$),p.push(f),p=JSON.stringify(p)
}function k(e){var t,i,o=document.cookie.split(";");for(e+="=",t=0;t<o.length;t++){for(i=o[t];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null}function x(){var e=[],t=null,i="",o=P.find("input, select");for(t=0;t<o.length;t++)i="CONFIRM"!==o[t].getAttribute("data-format")?o[t].value:"",e.push(i);return e}function S(){L=N.selectedSku||{backOrder:null,skuAvailable:!0,skuId:-1,fulfillmentChannelID:-1}}function I(){z||(z=e(s),T=z.find(".alert-buttons"),z.appendTo(R))}var z,T,L={backOrder:void 0,skuAvailable:!0,size:"",color:"",width:"",value:"",skuId:-1,fulfillmentChannelID:-1},R=e("#buy-button"),P=e("#customization-lines"),W=e("#quantity"),O=W.find("input"),A=W.find(".quantity-alert-message"),E=i.getValue("cookies.nordstrom"),N=i.getValue("product"),F=e("#value-buttons").length,j="Please choose another size or color.",V=' You can also <button type="button" class="waitlist-link">join the waitlist</button> and we&rsquo;ll let you know if this combination comes back in stock.',Z="This item has an approximate ship date of {0}.",B="No {0} selected:",D="Please choose a {0}.",H="This combination is unavailable:",q="Confirm Personalization:",U="Please click OK to confirm your customized name or click Cancel to change.",M=i.getValueOrDefault("product.textLabels.insuredDeliveryService",""),G=i.getValueOrDefault("product.textLabels.insuredDeliverySignature",""),$={corporateStoreId:"",storeNumber:"",zip:"",radius:""};return{init:a}}),define("nord/feature/util/validate",[],function(){function e(e){return t.test(e)}var t=/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i;return{emailIsValid:e}}),define("nord/feature/productPage/giftCardCustomization",["jquery","nord/feature/util/validate","nord/feature/dialog/modal"],function(e,t){function i(){o()}function o(){var i=e("#customization-lines"),o=i.find(".email-input"),h=i.find(".confirm-input"),p=i.find(".phone-input"),f=i.find("input[data-validation]");o.on("focusout.email",function(){var i=e(this).val(),o=h.val(),l="";if(""===i||!t.emailIsValid(i))return l=""===i?s:r.replace("{0}",i),n(this,"show",l),!1;if(n(this,"hide"),""!==o)if(h.hasClass("error")&&o.toLowerCase()===i.toLowerCase())n(h,"hide");else if(o.toLowerCase()!==i.toLowerCase())return n(h,"show",a),!1;return!0}),h.on("focusout.confirmEmail",function(){return e(this).val().toLowerCase()!==o.val().toLowerCase()?(n(this,"show",a),!1):(n(this,"hide"),!0)}),p.on("focusout.phoneNumber",function(){var t=e(this).val(),i="";return""!==t&&/^\d+$/.test(t)&&t.replace(/[^0-9]/g,"").length===u?(n(this,"hide"),!0):(i=""===t?d:l,n(this,"show",i),!1)}),f.on("focusout.inputText",function(){var t,i=e(this),o=i.val(),s=i.data("validation");""!==o&&s&&(t=new RegExp(s),t.test(o)?n(this,"hide"):n(this,"show",c.replace("{0}",o)))})}function n(t,i,o){var n=e(t).parent(),s=n.find(".error-message"),r=n.find(".status-icon"),a=n.find("label");"show"===i?(e(t).addClass("error"),s.removeClass("hidden").text(o),r.removeClass("hidden"),a.addClass("error")):s.hasClass("hidden")||(s.addClass("hidden").text(""),e(t).removeClass("error"),a.removeClass("error"),r.addClass("hidden"))}var s="Please enter the Recipient's E-mail Address. An e-mail address is required for Virtual Gift Card purchases.",r="The value {0} you have entered is invalid. Please re-enter the e-mail address.",a="The email addresses you entered do not match. Please make sure the email address is correct in both email fields.",l="The Recipient Phone Number you have entered is invalid. Please re-enter the 10-digit phone number including area code.",d="Please enter the Recipient Phone Number. We require this number to insure that your gift arrives safely.",c="The value {0} contains characters that are not allowed for this item. Please see the product description for a list of acceptable characters.",u=10;return{init:i}}),define("nord/feature/util/browserVersion",["jquery","nord/config"],function(){function e(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];try{if(/trident/i.test(i[1]))return e=/\brv[ :]+(\d+(\.\d+)?)/g.exec(t)||[],"IE "+(e[1]||"");i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/([\.\d]+)/i))&&(i[2]=e[1])}catch(o){return i}return i}return{getUserAgent:e}}),define("nord/feature/util/liveChat",["jquery","nord/config","nord/feature/util/browserVersion"],function(e,t,i){function o(){t.getValueOrDefault("shopper.environmentInfo.isPos",!1)||(r.length&&("function"==typeof webISChatPop?n():e.getScript("//as00.estara.com/as/InitiateCall2.php?accountid=200106301754").done(n)),a.length&&e.getScript("//static.atgsvcs.com/js/atgsvcs.js").done(function(){"object"==typeof ATGSvcs&&ATGSvcs.setUOID(200106301754)}))}function n(){var o=i.getUserAgent(),n=location.href.replace(location.search,""),a=t.getValue("page.isProd")?"prodId":"devId";r.each(function(i,o){var n=e(o).attr("class").match(/\bliveChat[a-zA-Z0-9_\-]*\b/)[0],r=s(n);null!==r&&e(this).html(/^liveChatBclMac$/.test(n)?"ProductPage"===t.getValue("page.pageType")?'<button class="live-chat-link link-button" data-chat-id="'+r[a]+'">Live Chat</button>':'<button class="live-chat-link link-button" data-chat-id="'+r[a]+'">Live Chat</button>':/^liveChatBclMacNav$/.test(n)?'<button class="live-chat-link link-button" data-chat-id="'+r[a]+'">Live Chat with a Beauty Stylist</button>':'<button class="live-chat-link link-button" data-chat-id="'+r[a]+'">'+e(this).html()+"</button>")}),e(".live-chat-link").on("click.chat",function(t){var i=["Template="+e(this).data("chatId"),"optionaldata1="+n,"optionaldata2="+o];t.preventDefault(),"undefined"==typeof webISChatPop?e.getScript("//as00.estara.com/as/InitiateCall2.php?accountid=200106301754",function(){webISChatPop.apply(window,i)}):webISChatPop.apply(window,i)})}function s(e){var t=0;for(t;t<l.length;t++)if(l[t].name===e)return l[t];return null}var r,a,l=[{name:"liveChatLPcs",devId:976964,prodId:968665},{name:"liveChatLPbs",devId:976944,prodId:968039},{name:"liveChatLPws",devId:976974,prodId:970144},{name:"liveChatLPds",devId:976954,prodId:968655},{name:"liveChatCcl",devId:976964,prodId:968665},{name:"liveChatBcl",devId:976944,prodId:968039},{name:"liveChatWcl",devId:976974,prodId:970144},{name:"liveChatDcl",devId:976954,prodId:968655},{name:"liveChatBclMac",devId:976944,prodId:968039},{name:"liveChatBclMacNav",devId:976944,prodId:968039}],d=[];return e.each(l,function(e,t){d.push(t.name)}),r=e("."+d.join(", .")),a=e("#"+d.join(", #")),{init:o}}),define("text!htmlTemplate/product/waitlist-dropdowns.html",[],function(){return'<div class="waitlist-dropdown">\n	{{#renderSize}}\n		<label for="waitlist-size-dropdown">{{sizeLabel}}: </label>\n		<select id="waitlist-size-dropdown" selectLabel="size">\n			<option value=-1>Select a size</option>\n			{{#sizeList}}\n			<option>{{Name}}</option>\n			{{/sizeList}}\n		</select>\n	{{/renderSize}}\n</div>\n<div class="waitlist-dropdown">\n	{{#renderWidth}}\n	<label for="waitlist-width-dropdown">{{widthLabel}}: </label>\n	<select id="waitlist-width-dropdown" selectLabel="width">\n		<option value="-1">Select a width</option>\n		{{#widthList}}\n		<option>{{Name}}</option>\n		{{/widthList}}\n	</select>\n	{{/renderWidth}}\n</div>\n<div class="waitlist-dropdown">\n	{{#renderColor}}\n	<label for="waitlist-color-dropdown">{{colorLabel}}: </label>\n	<select id="waitlist-color-dropdown" selectLabel="color">\n		<option value=-1>Select a color</option>\n		{{#colorList}}\n		<option value={{Id}}>{{Name}}</option>\n		{{/colorList}}\n	</select>\n	{{/renderColor}}\n</div>\n<div id="waitlist-color-swatches" class="hidden">\n	{{#renderSwatches}}\n	<ul>\n		{{#swatchList}}\n		<li associatedColorId="{{colorId}}">\n			<a id ="{{colorId}}" href=\'javascript:void(0);\'>\n				<img class="swatch" selectLabel="ImgSwatch" data-color-id="{{colorId}}" src="{{imgUrl}}" title="{{title}}" />\n			</a>\n		</li>\n		{{/swatchList}}\n	</ul>\n	{{/renderSwatches}}\n</div>\n'}),define("text!htmlTemplate/product/waitlist-price-filters.html",[],function(){return'{{#renderFilter}}\n<div class="waitlist-pricefilter">\n	<label>Size Range:</label>\n	<div class="item-number-price-wrapper">\n		{{#priceFilterList}}\n		<ul class="{{PriceFilterClass}}">\n			<li class="filter">\n				<input id="waitlist-price-filter-{{Rank}}" type="radio" name="waitlist-pricefilter" value="{{Label}}">\n					<label for="waitlist-price-filter-{{Rank}}">{{Label}}</label>\n				</input>\n			</li>\n			<li class="{{LiPriceClass}}">\n				<span class="price regular">{{RegularPrice}}</span>  {{#SalePrice}}\n				<span class="price sale">{{SalePrice}}</span>  {{/SalePrice}}  {{#PercentOff}}\n				<span class="price percentoff">{{PercentOff}}</span>  {{/PercentOff}}\n			</li>\n			<li class="itemNumber">\n				<span>{{itemNumberLabel}}{{ItemNumber}}</span>\n			</li>\n		</ul>\n		{{/priceFilterList}}\n	</div>\n</div>\n{{/renderFilter}}\n'}),define("text!htmlTemplate/product/waitlist-content.html",[],function(){return'<h2>Join the Waitlist</h2>\n<p>Let us know which one you want! We"ll let you know if your selection comes back in stock.</p>\n<div class="static waitlist-response error-text"></div>\n<div>\n	<label for="email">E-mail: </label>\n	<input id="email" type="text" tabindex="0" class="email-input"/>\n	<div class="static email-validation error-text"><span></span></div>\n</div>\n{{{priceFilterOptions}}}\n<div class="dynamic waitlist-dropdowns"></div>\n<div class="static buttons">\n	<button class="cancel-button button" type="reset">Cancel</button>\n	<button class="add-to-waitlist button button-primary">Join the Waitlist</button>\n</div>\n<div class="sku-error-popup static error hidden">\n	<div class="header clearfix">\n		<div class="text"></div>\n		<div class="description"></div>\n	</div>\n	<div class="footer">\n		<button class="error-popup-close">Close</button>\n	</div>\n</div>\n'}),define("text!htmlTemplate/product/waitlist-thankyou.html",[],function(){return'<h2 id="waitlist-thanks">Thanks!</h2>\n<div>\n	We\'ll send you an e-mail if your selection\n	<strong>{{selectionText}}</strong>\n	comes back in stock. This is a popular item and may sell out again quickly, so be sure to act fast if you hear from us!\n	<p>\n		Want to know about new looks, events and more, online and in store?\n		<a class="js-popup-link" title="get email updates" href="https://em.nordstrom.com/pub/rf?_ri_=X0Gzc2X%3DWQpglLjHJlYQGutzbmR0vHUuGizf5mFISrP8FnMRVwjpnpgHlpgneHmgJoXX0Gzc2X%3DWQpglLjHJlYQGggkiytwrrAHmKgsimB2PM8MGn&FORM_ID=GEC">\n			Get Our Updates\n		</a>\n	</p>\n	<div class="static buttons">\n		<button class="button button-standard waitlist-close" type="button">Close</button>\n	</div>\n</div>\n'}),define("nord/feature/productPage/waitlist",["jquery","nord/config","mustache","nord/feature/dialog/modal","nord/feature/navigation/_popup","nord/feature/util/validate","nord/feature/util/keyCode","text!htmlTemplate/product/waitlist-dropdowns.html","text!htmlTemplate/product/waitlist-price-filters.html","text!htmlTemplate/product/waitlist-content.html","text!htmlTemplate/product/waitlist-thankyou.html"],function(e,t,i,o,n,s,r,a,l,d,c){function u(){bt.waitlistEligible&&bt.unavailableSkuCount>0&&(n.init(Ct),e("#right-column").on("click.waitlistOpen",".waitlist-link",h))}function h(){ut=ut||o.create(Ct,kt),ut.show(),Ct.removeClass("hidden"),f(),Ft=bt.RenderPriceFilter,Ft&&J(),O(),nt(),Ft&&B(),Y(),g(),v(),E(),st(),it()&&ft.removeClass("hidden"),ht.find("h2").attr("role","alert"),qt=!0}function p(e,t){var i;for(i=0;i<t.length;i++)if(t[i].id===e)return t[i];return null}function f(){var e,t,i,o,n,s,r,a,l,d,c,u,h,f;for(a=0;a<bt.waitlistChoiceGroups.length;a++)for(o=bt.waitlistChoiceGroups[a],n=o.caption,r=0;r<o.choices.length;r++)for(e=o.choices[r],i=e.caption.toLowerCase(),t=e.details,l=0;l<t.length;l++)for(s=t[l].displayValue,"color"===i&&(f=t[l].swatchUrl),h=t[l].skuIds,d=0;d<h.length;d++)u=h[d],c=p(u,xt),c?c[i]=s:(c=p(u,bt.skus),c&&(c[i]=s,c.choiceGroup=n,xt.push(c))),c.swatchImageUrl||"color"!==i||(c.swatchImageUrl=f)}function m(){ut.hide(),e("#modal-content").css("min-height",kt.minHeight+"px")}function g(){pt.val(_t.email)}function v(){ht.find(".cancel-button").on("click.waitlistCancel",m),e("#modal-content").find(".modal-close").on("click.waitListCancel",m),ht.find(".add-to-waitlist").on("click.waitlistSubmit",T)}function w(e){return{NotificationEmailAddress:pt.val(),ShopperId:_t.id,SkuId:e.id,StyleId:bt.styleId,StyleSaleFlag:bt.saleTypeId}}function b(){var e,t=ht.find("select").length+ht.find("input[name=waitlist-pricefilter]:checked").length,i=ot();if(i.length===t)for(e=0;e<xt.length;e++)if(_(xt[e],i))return xt[e]}function _(e,t){var i,o;for(o=0;o<t.length;o++)if(i=t[o],i.selectValue.toLowerCase()!==e[i.selectLabel].toLowerCase())return!1;return!0}function y(t){var i=JSON.stringify(w(t));e.ajax({type:"POST",dataType:"json",url:yt.store+"WL/AddToWaitList",data:i,success:C,error:k})}function C(e){var t=ht.find(".waitlist-response.error-text");return e?(lt(),e.toString()===Yt.error?(t.html($t.unknownError),void t.attr("role","alert")):void((e.toString()===Yt.success||e.toString()===Yt.alreadyExists)&&x())):(t.html($t.unknownError),void t.attr("role","alert"))}function k(){var e=ht.find(".waitlist-response.error-text");qt=!0,e.html($t.unknownError),e.attr("role","alert")}function x(){ht.html(i.render(c,{selectionText:I()})),e("#modal-content").css("min-height","230px"),S()}function S(){ht.find("#close, .waitlist-close").on("click",m)}function I(){var t,i,o=ht.find(".waitlist-dropdowns label"),n=ht.find(".waitlist-dropdowns select"),s=[],r=ht.find(".waitlist-dropdowns label[for=waitlist-color-dropdown]")&&"color:"===ht.find(".waitlist-dropdowns label[for=waitlist-color-dropdown]").text().trim();if(o.length===n.length)for(var a=0;a<o.length;a++)t=o[a].textContent.trim(),i=dt(e(n[a])).trim(),r?"color:"===t?s[0]=t+" "+i:s[a+1]=t+" "+i:s.push(t+" "+i);return z(s)}function z(e){var t=e.length,i="";if(t>0)for(gt=0;t>gt;gt++)gt>0&&gt===t-1?i+=" and ":gt>0&&(i+=", "),i+=e[gt];return i}function T(){var e;if(qt)return(e=b())?void(W()&&(qt=!1,y(e))):void L()}function L(){var e=ht.find(".sku-error-popup"),t=e.find(".text"),i=e.find(".description"),o=e.find(".error-popup-close"),n=R();t.html("<span>No "+n+" selected:</span>"),i.html("<span>Please choose a "+n+".</span>"),e.removeClass("hidden"),o.attr("title",t.text()+"."+i.text()).focus(),o.on("click",function(){e.addClass("hidden")})}function R(){for(var e="",t=P(),i=0;i<t.length;i++)i>0&&i===t.length-1?e+=" or ":i>0&&(e+=", "),e+=t[i];return e}function P(){var e=[];return It.length>0&&e.push("size"),zt.length>0&&e.push("width"),St.length>0&&e.push("color"),e}function W(){var e=pt.val(),t=ht.find(".email-validation span"),i=s.emailIsValid(e);return i?(t.html("").removeClass("sprite-circle-exclamation"),pt.removeClass("error"),!0):(t.html($t.invalidEmailError).addClass("sprite-circle-exclamation").attr("role","alert"),pt.addClass("error"),!1)}function O(){var t,o="waitlist-modal-content",n="#"+o;ht=e(n),ht.length||(ht=Ct.append('<div id="'+o+'"></div>').find("#"+o)),ht.html(i.render(d,{priceFilterOptions:A()})),mt=e(".waitlist-pricefilter"),t=mt.find(".filter"),mt.find("input").on("click",function(){H()}),1===t.length&&(t.eq(0).find("input").prop("checked",!0).trigger("click"),mt.addClass("hidden")),pt=ht.find("#email")}function A(){var e=i.render(l,{priceFilterList:Lt,renderFilter:Ft,itemNumberLabel:Dt});return e}function E(){var e=i.render(a,{colorList:St,sizeList:It,widthList:zt,priceFilterList:bt.priceFilters,renderWidth:zt.length>0,renderSize:It.length>0,renderColor:St.length>0,colorLabel:"color",sizeLabel:"size",widthLabel:"width",renderSwatches:Zt,swatchList:Tt});ht.find(".waitlist-dropdowns").html(e),ft=ht.find("#waitlist-color-swatches"),F(),N()}function N(){Bt=ft.find("li"),ht.find("select").on("change",q),Bt.on("click",V),Bt.on("keypress",Z)}function F(){at(It,e("#waitlist-size-dropdown"),"-1"),at(St,e("#waitlist-color-dropdown"),"-1"),at(zt,e("#waitlist-width-dropdown"),"-1"),Tt.length>0&&Tt.sort(function(e,t){return e.title.localeCompare(t.title)})}function j(e){var t=e.toLowerCase().replace(/^[a-z]|(?:\s[a-z])/g,function(e){return e.toUpperCase()});return t}function V(t){var i,o,n=e(t.target);n.is("a")&&(n=n.find("img")),i=n.parent().attr("id"),o=n.attr("data-color-id"),e("#waitlist-color-dropdown").val(o),D(),U(),e("#"+i).focus()}function Z(e){var t=e.keyCode?e.keyCode:e.which;t===r.enter&&V(e)}function B(){ht.find('.filter input[value="'+vt.priceGroup+'"]').prop("checked",!0)}function D(){M(),Y(),E(),$()}function H(){G(),Y(),E(),it()&&ft.removeClass("hidden")}function q(t){ft.addClass("hidden"),D(),it()&&U(),e(t.target).focus()}function U(){var t=e("#waitlist-color-dropdown").val();ft.removeClass("hidden"),ft.find(".swatch").parents("li").removeClass("selected"),t&&ft.find("img[data-color-id="+t+"]").parents("li").addClass("selected")}function M(){for(var t,i,o=ht.find("select"),n=0;n<o.length;n++)t=e(o[n]),i=t.attr("selectLabel"),Ht.push({property:i,value:t.val()})}function G(){for(var t,i=ht.find("select"),o=0;o<i.length;o++)t=i[o],e(t).val(-1)}function $(){var e,t,i;for(i=0;i<Ht.length;i++)e=Ht[i],t=ht.find("select[selectLabel="+e.property+"]"),t.val(e.value),ct(t,e.value)}function Y(){var e,t=ot();St.length=0,It.length=0,zt.length=0,Tt.length=0,Rt.length=0,Pt.length=0,Wt.length=0,Ot.length=0;for(var i=0;i<xt.length;i++)e=xt[i],e.swatchImageUrl&&(Et&&Q(e,t,"color",jt),Nt&&Q(e,t,"size",Vt),At&&Q(e,t,"width",Vt))}function J(){var e,t;for(Lt.length=0,t=0;t<bt.priceFilters.length;t++)e=bt.priceFilters[t],Lt.push(e)}function X(e,t,i){for(var o,n=!0,s=0;s<t.length;s++)if(o=t[s],o.selectLabel!==i&&o.selectValue.toLowerCase()!==e[o.selectLabel].toLowerCase()){n=!1;break}return n}function Q(e,t,i,o){var n,s;Ut=[],Mt=[],Gt=!1,K(i),e[i]&&-1===o.indexOf(e[i].toLowerCase())?X(e,t,i)&&(n={},s={},"color"===i?tt(n,s,e,i):n={Name:e[i]},-1===Mt.indexOf(n.Name)&&(Ut.push(n),Mt.push(n.Name),"color"===i&&Tt.push(s),Gt=!0)):0===Ut.length&&(Gt=!1),et(i)}function K(e){"size"===e?(Ut=It,Mt=Pt,Gt=Nt):"width"===e?(Ut=zt,Mt=Wt,Gt=At):"color"===e&&(Ut=St,Mt=Rt,Gt=Et)}function et(e){"size"===e?(It=Ut,Pt=Mt,Nt=Gt):"width"===e?(zt=Ut,Wt=Mt,At=Gt):"color"===e&&(St=Ut,Rt=Mt,Et=Gt)}function tt(e,t,i,o){e.Id=i.colorId,e.Name=j(i[o]),t.colorId=i.colorId,t.imgUrl=yt.gallery+i.swatchImageUrl,t.title=i.color.toUpperCase()}function it(){var t,i=ht.find("select"),o=!0;if(""===ft.find("ul").html().trim())return!1;for(var n=0;n<i.length;n++)if(t=e(i[n]),"color"!==t.attr("selectLabel")&&-1===+t.val()){o=!1;break}return o}function ot(){var t,i,o=ht.find("select"),n=mt.find("input[name=waitlist-pricefilter]:checked"),s=[];for(n.length>0&&s.push({selectLabel:"choiceGroup",selectValue:n.val()}),i=0;i<o.length;i++)t=e(o[i]),"-1"!==t.val()&&s.push({selectLabel:t.attr("selectLabel"),selectValue:dt(t)});return s}function nt(){vt=bt.selectedSku}function st(){var e;nt(),vt&&(e=mt.find('input[value="'+vt.choiceGroup+'"]'),e.length>0&&(e.prop("checked"),Lt[0].Label!==e.attr("value")&&(Y(),E())),Ht.length=0,rt(),D(),it()&&U())}function rt(){var t,i,o,n,s=ht.find("select");for(n=0;n<s.length;n++)t=e(s[n]),i=t.attr("selectLabel"),o="color"===i?vt.colorId:vt[i],ct(t,o)}function at(e,t,i){var o,n,s,r=t.val(),a=t.find("option:first");e.length&&(o=t.find("option:not(:first)").sort(function(e,t){return e.value===i?-1:(n=parseFloat(e.text),s=parseFloat(t.text),isNaN(n)&&isNaN(s)?e.text===t.text?0:e.text<t.text?-1:1:n===s?0:s>n?-1:1)}),t.html(o).prepend(a),t.val(r))}function lt(){if(mt.length>0){var t=ht.find("input[name=waitlist-pricefilter]:checked");if(t){var i=e(t).parents("li").siblings(".itemNumber");i&&(wt=e(i).find("span").text().split("#")[1])}}else wt=bt.styleNumber}function dt(e){return e.find("option:selected").text()}function ct(e,t){var i=!1;e.find("option").each(function(){this.removeAttribute("selected"),this.value===t&&(e.val(t),i=!0)}),i||e.val(-1)}var ut,ht,pt,ft,mt,gt,vt,wt,bt=t.getValue("product"),_t=t.getValue("shopper"),yt=t.getValue("urls"),Ct=e(".waitlist-modal"),kt={theme:"light",minHeight:420,minWidth:600,paddingInContent:!0},xt=[],St=[],It=[],zt=[],Tt=[],Lt=[],Rt=[],Pt=[],Wt=[],Ot=[],At=!0,Et=!0,Nt=!0,Ft=!1,jt=["no color","one color","none",""],Vt=["no size","one size","none",""],Zt=!0,Bt=[],Dt="Item #",Ht=[],qt=!1,Ut=[],Mt=[],Gt=!1,$t={emailRequiredFieldError:"The email address field is a required field.",invalidEmailError:"The email address field does not contain a valid email address.",unknownError:"Sorry, something went wrong. Please try again."},Yt={error:"Unknown",success:"SuccessfullyAddedToWaitList",alreadyExists:"ItemAlreadyAddedOnWaitList"};return{init:u}}),define("nord/feature/interaction/accordion",["jquery"],function(e){function t(){s||(e(document).on("click.accordion",o,function(t){var o=e(t.target),s=o.parents(i).first(),r=s.find(n).first();r.slideToggle(300,function(){s.toggleClass("collapsed expanded"),e(window).trigger("resize")})}),s=!0)}var i=".accordion",o=".accordion-header",n=".accordion-content",s=!1;t()}),define("nord/feature/util/UrlParser",[],function(){function e(o){if(!(this instanceof e))return null;var n;i.href=o;for(n in t)this[n]=i[t[n]]||""}var t={protocol:"protocol",username:"username",password:"password",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},i=document.createElement("a");return e.prototype={toString:function(){var e=this.username+(this.password?":"+this.password:"");return this.protocol+"//"+(e?e+"@":"")+this.host+(this.port?":"+this.port:"")+this.path+this.query+this.hash}},e}),define("nord/feature/util/userInfo",["jquery","nord/config","nord/feature/util/cookie","nord/feature/util/UrlParser"],function(e,t,i,o){function n(){var e=t.getValue("cookies.auth");return!!i.getValue(e,"auth")}function s(){var e=t.getValue("cookies.nordstrom"),o=i.getValue(e,"firstname");return o}function r(i){if(i){var n=e("#shopper-status"),s=n.find("a"),r=(s.attr("href"),new o(t.getValue("urls.secure")+"SignOut.aspx"));r.query=new o(s.attr("href")).query,s.text("Sign Out").attr("href",r.toString()),e("<li>Hello, "+i+" </li>").insertBefore(n)}}return{isUserLoggedIn:n,getName:s,refreshShopperGreeting:r}}),define("nord/feature/productPage/replenishmentReminder",["jquery","nord/feature/dialog/modal","nord/config","nord/feature/util/querystring","nord/feature/util/cookie","nord/feature/util/userInfo"],function(e,t,i,o,n,s){function r(){_.attr("width",m),h=t.create(_,{theme:"light",maxWidth:m,paddingInContent:!0}),l(),c(),b.on("click.replenishmentReminder",d),h.on("close",u)}function a(){var e=f.selectedSku.skuId;return p+"ReminderSetup.aspx?styleId="+f.styleId+(-1!==e?"&skuId="+e:"")+"&parentUrl="+document.URL}function l(e){var t=void 0===e?g:e,i=t;_.attr("height",t),h.setMinHeight(i)}function d(e){var t=a();_.attr("src",t),_.one("load",function(){h.show(),w=!1}),e.preventDefault(),e.stopPropagation()}function c(){e(window).on("message",function(e){var t=e.originalEvent,i="?"+t.data,n=o.deserialize(i);if(!w&&-1!==t.origin.indexOf("nordstrom.com")&&void 0!==n.messageType)switch(n.messageType){case"Resize":l(n.remindersModalHeight);break;case"CloseReminderModal":h.hide();break;case"RefreshPageHeader":v=!0}})}function u(){w=!0,v&&(v=!1,s.refreshShopperGreeting(s.getName()))}var h,p=i.getValue("urls.secure"),f=i.getValue("product"),m=400,g=350,v=!1,w=!0,b=e(".replenishment-reminder-link"),_=e("#replenishment-iframe");return{init:r}}),!function(){var e,t,i,o,n,s={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};o=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,o,n,s,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=e.childNodes,r=[],o=0,n=s.length;n>o;o++)i=s[o],r.push(this.add_option(i,t,e.disabled));return r},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,i;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}(),o.select_to_array=function(e){var t,i,n,s,r;for(i=new o,r=e.childNodes,n=0,s=r.length;s>n;n++)t=r[n],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,i,o,n,s;for(t="",s=this.results_data,o=0,n=s.length;n>o;o++)i=s[o],t+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match?this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=e.style,i.setAttribute("data-option-array-index",e.array_index),i.innerHTML=e.search_text,this.outerHTML(i)):"":""},e.prototype.result_add_group=function(e){var t;return e.search_match||e.group_match?e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):"":""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,i,o,n;for(o=this.results_data,n=[],t=0,i=o.length;i>t;t++)e=o[t],n.push(e.selected?e.selected=!1:void 0);return n},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,o,n,s,r,a,l,d,c,u,h;for(this.no_results_clear(),n=0,r=this.get_search_text(),e=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=this.search_contains?"":"^",i=new RegExp(o+e,"i"),d=new RegExp(e,"i"),h=this.results_data,c=0,u=h.length;u>c;c++)t=h[c],t.search_match=!1,s=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(s=this.results_data[t.group_array_index],0===s.active_options&&s.search_match&&(n+=1),s.active_options+=1),(!t.group||this.group_search)&&(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,i),t.search_match&&!t.group&&(n+=1),t.search_match?(r.length&&(a=t.search_text.search(d),l=t.search_text.substr(0,a+r.length)+"</em>"+t.search_text.substr(a+r.length),t.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=s&&(s.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>n&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var i,o,n,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(o=e.replace(/\[|\]/g,"").split(" "),o.length))for(n=0,s=o.length;s>n;n++)if(i=o[n],t.test(i))return!0},e.prototype.choices_count=function(){var e,t,i,o;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,o=this.form_field.options,t=0,i=o.length;i>t;t++)e=o[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"
},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(o){return t.browser_is_supported()?this.each(function(){var t,n;t=e(this),n=t.data("chosen"),"destroy"===o&&n?n.destroy():n||t.data("chosen",new i(this,o))}):this}}),i=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},i.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){var i;return i=e(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=o.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(e){var t,i,o,n,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),o=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),n=o+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=n)return this.search_results.scrollTop(t-o>0?t-o:0);if(s>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.html(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(t){var i,o,n=this;return i=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?i.addClass("search-choice-disabled"):(o=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),o.bind("click.chosen",function(e){return n.choice_destroy_link_click(e)}),i.append(o)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},i.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,i;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[t[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},i.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,i,o,n,s,r,a,l,d;if(this.is_multiple){for(o=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,d=r.length;d>l;l++)n=r[l],s+=n+":"+this.search_field.css(n)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),a=t.width()+25,t.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(t)}.call(this),define("thirdParty/plugin/chosen.jquery.min",function(){}),define("nord/feature/util/loadingModal",["jquery","nord/feature/dialog/modal"],function(e,t){function i(){n||(e("body").append(a),n=n||t.create(e(r),l)),n.show()}function o(){n&&n.hide()}var n,s="loading-modal",r="."+s,a='<div class="'+s+'"></div>',l={theme:"light",minHeight:100,minWidth:200,paddingInContent:!0};return{show:i,hide:o}}),define("nord/feature/productPage/productUtilities",["jquery","nord/config"],function(e,t){function i(e){for(var t=0;t<o.skus.length;t++)if(o.skus[t].size1Value===e)return!0;return!1}var o=t.getValue("product");return{sizeIsAvailable:i}}),define("nord/feature/productPage/consumerInsight",["jquery","../../../thirdParty/plugin/chosen.jquery.min","nord/feature/dialog/modal","nord/config","nord/feature/util/stringUtils","nord/feature/util/cookie","nord/feature/util/loadingModal","nord/feature/productPage/productUtilities","//libs.coremetrics.com/eluminate.js"],function(e,t,i,o,n,s,r,a){function l(){if(b()){if(x(F?"NFS_Recognized":"NFS_Unrecognized"),0===bt.length)return void console.log("Insights placeholder is missing");z=_(),d()}}function d(){z.on(n.format(At,Et),"a."+$,function(e){e.preventDefault(),h(function(){p($),x("NFS_Why This Size")})}).on(n.format(At,Nt),"a."+q,function(e){e.preventDefault(),h(function(){z.find(Y).html(j),p(st),x("NFS_Edit Info")})}).on(n.format(At,Ft),"a."+U,function(e){e.preventDefault(),h(function(){z.find(Y).html(j),p(M),x("NFS_Unrecognized_App Opened")})})}function c(t){t="object"==typeof t?t:{};var i={type:"GET",data:"ct=c&tn=ConsumerInsightsModal",processData:!1,url:"/ts_nbo"};e.extend(i,t),e.ajax(i)}function u(){W.hide()}function h(t){var o,n,s,a;if(!T)return r.show(),void c({success:function(i){var o="<content>",n="</content>",s=i.search(o)+o.length,r=i.search(n);T=i.substring(s,r),L=e(T),h(t)},error:function(){u(),r.hide()}});if(!I)return r.show(),void v("GetBrands",N,{success:function(i){e.isArray(i.Brands)||(i.Brands=[]),I=i.Brands,Z=i.FitTypes,h(t)},error:function(){u(),r.hide()}});if(r.hide(),"function"==typeof t&&t(),f(),L.addClass("type-"+N),L.find(".type-"+N).removeClass("hidden"),W=W||i.create(L,_t),W.show(),W.on("close",function(){W.content.find(".error").removeClass("error")}),C(),s=w().BrandCollection,s&&s[N]){o=s[N].brand,n=s[N].size,a=s[N].fitStyle;for(var l=0;l<o.length;l++)P.brands[l].val(o[l]).trigger("change",[{preselect:n[l]}]).trigger("chosen:updated");if(Z)for(l=0;l<a.length;l++)P.fitTypes[l].val(a[l]).trigger("chosen:updated")}}function p(e,t){var i,o,s=n.format("section#{0}",e),r=L.find(s);if(!R||R.attr("id")!==e){if(R&&t&&(i=R.find(J),o=r.find(J),i.length&&o.length))return void i.fadeOut(yt,function(){R.removeClass(H),r.addClass(H),o.fadeIn(yt),R=r});R&&R.removeClass(H),R=r.addClass(H),R.find(J).show()}}function f(){L.on(jt,K,function(e){e.preventDefault(),e.stopPropagation(),W.hide()}).on(Vt,et,function(e){e.preventDefault(),e.stopPropagation(),p(R.prev().attr("id"),!0)}).on(Zt,tt,function(e){e.preventDefault(),e.stopPropagation(),p(st,!0),x("NFS_Unrecognized_Fit Info")}).on(Bt,it,function(e){e.preventDefault(),g()})}function m(t){var i=L.find(rt),o=!1;t.toLowerCase()===Pt?(i.addClass(G),x("NFS_Null Recommendation")):(i.removeClass(G),x("NFS_Unrecognized_Rec Received")),L.find(Y).html(t),j=t,E.CIRecommendedSize=t,S(),P.brandsCombined.each(function(){x("NFS_Fit Details",e(this).val())}),P.sizesCombined.each(function(t,i){var o=e(i);x("NFS_Fit Details",o.find('option[value="'+o.val()+'"]').text())}),Z&&P.fitTypesCombined.each(function(t,i){var o=e(i);x("NFS_Fit Details",o.find('option[value="'+o.val()+'"]').text())}),p(ot,!0),W.on("close",function(){o||(y(),o=!0)})}function g(){var t,i=!0,o=0,n=R.find(".required");if(n.removeClass("error"),n.each(function(){var t=e(this);t.find("select").val()||(i=!1,t.addClass("error"))}),!i)return x("NFS_Error","Form not filled out"),!1;for(p(nt,!0);o<P.brands.length;o++)B.brand[o]=P.brands[o].val();for(o=0;o<P.sizes.length;o++)B.size[o]=P.sizes[o].val();if(Z)for(B.fitStyle=[],o=0;o<P.fitTypes.length;o++)B.fitStyle[o]=P.fitTypes[o].val();t=w(),t.BrandCollection[N]=B,s.setValue(vt,wt,JSON.stringify(t),!0),B.StyleID=O.styleId,v("GetRecs",null,{data:"Selections="+JSON.stringify(B),success:function(e){var t=e.recommendation?e.recommendation:Pt;setTimeout(function(){m(t)},yt)},error:function(){setTimeout(function(){m(Pt)},yt)}})}function v(t,i,o){if(o="object"==typeof o?o:{},!t)return"function"==typeof o.error&&o.error(Ct),!1;var n={type:"GET",data:"",dataType:"json",url:"/s/sbs/"+t+(i?"/"+i:"")};e.extend(n,o),e.ajax(n)}function w(){var e=s.getValue(vt,wt);return e?JSON.parse(e):{BrandCollection:{}}}function b(){return E.consumerInsightEligible&&E.CIProductType&&!E.trufitEligible}function _(){var t,i,o,s,r=j.toLowerCase();return F&&j?(i=n.format(It,j),o=$,s=xt,x("NFS_Recognized_Rec Present"),S()):j&&r!==Pt?(i=n.format(It,j),o=q,s=kt,x("NFS_Unrecognized_Rec Present"),S()):r===Pt?(i=St,o=q,s=kt,x("NFS_Unrecognized_Rec Present")):(i=zt,o=U,s=Tt),t=e('<div id="consumer-insight">'+n.format('<span class="sprite {0}"></span>',Rt)+n.format("{0}<br />",i)+n.format('<a href="#" class="{0}">{1}</a>',o,s)+"</div>"),bt.replaceWith(t),t}function y(){z&&(z.attr("id",X),z.empty(),bt=e(Q)),z=null,l()}function C(){var t=L.find("#"+st),i=0;for(P={brands:[t.find(lt),t.find(dt)],sizes:[t.find(ut),t.find(ht)],fitTypes:[t.find(ft),t.find(mt)],brandsCombined:e(),sizesCombined:e(),fitTypesCombined:e()};i<P.brands.length;i++)P.brandsCombined=P.brandsCombined.add(P.brands[i].data(Wt,i));if(P.brandsCombined.css("display")!==Pt){for(i=0;i<P.sizes.length;i++)P.sizesCombined=P.sizesCombined.add(P.sizes[i]).data(Wt,i);for(i=0;i<P.fitTypes.length;i++)P.fitTypesCombined=P.fitTypesCombined.add(P.fitTypes[i]).data(Wt,i);for(P.sizesCombined.prop(Ot,!0),P.fitTypesCombined.prop(Ot,!0),i=0;i<I.length;i++)P.brandsCombined.append(n.format(gt,I[i].SupplierNumber,I[i].SupplierName));if(!Z||!Z.length||A&&A.hideFitStyle)P.fitTypesCombined.parent().remove();else for(i=0;i<Z.length;i++)P.fitTypesCombined.append(n.format(gt,Z[i].FitId,Z[i].FitDescription));P.brandsCombined.on("change",function(t,i){var o=i&&i.preselect?i.preselect:null;k(e(this).data("number"),o),P.fitTypes[e(this).data("number")].prop(Ot,!1).trigger("chosen:updated")}),"function"==typeof P.brandsCombined.chosen&&P.brandsCombined.add(P.sizesCombined).add(P.fitTypesCombined).chosen({width:"100%",disable_search_threshold:15})}}function k(e,t){var i,o,s=P.brands[e].val(),r=0;if(!s)return!1;if(i=V[s],!i)return void v("GetSizes",N+"/"+s,{success:function(i){V[s]=i.Sizes,k(e,t)}});for(o=P.sizes[e],o.prop(Ot,!1).empty().append('<option value="" />');r<i.length;r++)o.append(n.format(gt,i[r].CISize,i[r].WebSize));t&&o.val(t),o.trigger("chosen:updated")}function x(e,t){return e&&"function"==typeof cmCreatePageElementTag?(t||(t=O.styleNumber),cmCreatePageElementTag(t,e),!0):!1}function S(){var e;!D&&window.cmCreateElementTag&&(e="NFS-"+(a.sizeIsAvailable(j)?"Yes":"No"),cmCreateElementTag(e,"Fit Rec Availability"),D=!0)}var I,z,T,L,R,P,W,O=o.getValue("product"),A=o.getValue("tto"),E=O.fitRecommendation,N=E.CIProductType,F=E.IsCICustomer,j=E.CIRecommendedSize,V={},Z=null,B={brand:[],size:[]},D=!1,H="current-page",q="unknown-rec",U="unknown-start",M="unknown-intro",G="rec-false",$="known-info",Y=".recSize",J=".animate",X="consumer-insight-placeholder",Q="#"+X,K=".ci-close",et=".back",tt="#get-started",it="#view-recommendation",ot="unknown-recommendation",nt="unknown-loading",st="unknown-brand-size",rt="#"+ot,at="#brand-select-{0}",lt=n.format(at,"1"),dt=n.format(at,"2"),ct="#size-select-{0}",ut=n.format(ct,"1"),ht=n.format(ct,"2"),pt="#fit-type-select-{0}",ft=n.format(pt,"1"),mt=n.format(pt,"2"),gt='<option value="{0}">{1}</option>',vt=o.getValue("cookies.personalization"),wt="CIPT",bt=e(Q),_t={theme:"light",paddingInContent:!0,minHeight:475,minWidth:600},yt=300,Ct="Action is required.",kt="Edit your information.",xt="Why this size?",St="We are unable to recommend a size for you.",It="We recommend size {0} for you.",zt="What size fits best?",Tt="Get a size recommendation.",Lt="sprite-size-fits-cloth-{0}",Rt=n.format(Lt,"Male"===O.gender?"men":"women"),Pt="none",Wt="number",Ot="disabled",At="click.consumerInsights{0}",Et=n.format(At,"KnownInfo"),Nt=n.format(At,"UnknownRec"),Ft=n.format(At,"UnknownStart"),jt=n.format(At,"ModalClose"),Vt=n.format(At,"ModalBack"),Zt=n.format(At,"ModalGetStart"),Bt=n.format(At,"ModalViewRecommendation");return{init:l}}),define("nord/feature/productPage/shoeFitr",["jquery","nord/feature/dialog/modal","nord/config","nord/feature/productPage/productUtilities"],function(e,t,i,o){function n(){s()&&(r(),a())}function s(){return h.fitRecommendation.shoeFitrEligible}function r(){var t,i=e("#color-swatch img"),o=h.skus;i.length&&(t=e("#color-swatch img:first-child").attr("src").match(/[0-9]+(?=.jpg)/)[0]);for(var n in o)if(o[n].photoGroupId&&o[n].photoGroupId.toString()===t){u=o[n].color;break}n=h.styleId?h.styleId.toString():"",c=h.styleNumber?h.styleNumber.split("_")[0]:""}function a(){e.getScript("http://static.shoefitr.com/v2/shoefitr.js").done(function(){window.shoefitr&&(nord.shoefitrProductPage=window.shoefitr.initProductPage(l()))})}function l(){return{version:"POC2.1",entryPoints:["shoefitr-placeholder"],cl_id:"52",customSku:c+" "+u,fTrackEvent:d}}function d(e,t){t=t||{},"ApplicationShown"===e?h.fitRecommendation.shoeFitrRecommendation=0:"RecommendationReceived"===e||"ApplicationShownWithRec"===e?(h.fitRecommendation.shoeFitrRecommendation=1,h.fitRecommendation.shoeFitrRecommendedSize=t,cmCreatePageElementTag("Shoefitr - "+(o.sizeIsAvailable(t.size)?"Yes":"No"),"Fit Rec Availability")):"UserIdentified"===e&&t.id&&(h.fitRecommendation.shoeFitrId=t.id),p[e]&&cmCreatePageElementTag(h.styleId,p[e])}var c,u,h=i.getValue("product"),p={ApplicationShown:"Shoefitr",ApplicationOpened:"Shoefitr_Application Opened",ModelSelected:"Shoefitr_Model Selected",SavedModelSelected:"Shoefitr_SavedModel Selected",RecommendationReceived:"Shoefitr_Recommendation Received",ApplicationShownWithRec:"Shoefitr_Rec Present",InterjectingRecommendationReceived:"Shoefitr_Size Tile"};return{init:n}}),define("nord/feature/productPage/truFit",["jquery","nord/config","nord/feature/util/userInfo"],function(e,t,i){function o(){n()&&s()}function n(){return l.fitRecommendation.trufitEligible}function s(){e.getScript(c,function(){window.nordTrueFit({target:e("#truefit-placeholder"),styleId:l.styleId,registered:+d.isRegisteredForFitRecs,searchOnClose:!1,onLoad:r,success:function(e){"success"===e.status&&(l.truFitRecommendation=e.size)},onIframeLoad:function(){u&&i.isUserLoggedIn()&&(i.refreshShopperGreeting(i.getName()),u=!1)}})})}function r(){e("#tf-modal .button.primary").addClass("button-primary").removeClass("primary")}var a=t.getValue("urls.image"),l=t.getValue("product"),d=t.getValue("shopper"),c=a+"default/shop/js/true-fit/v1/NordTrueFit.js",u=!i.isUserLoggedIn();o()}),define("nord/feature/productPage/productPromo",["jquery","nord/feature/dialog/modal"],function(e,t){function i(){var i=e("#product-promo-banner, #brand-title-promo"),o=i.find(".js-modal-link");o.each(function(){var i=e(this),o=i.attr("id"),n={"default":460},s=i.siblings(".js-modal-content"),r=t.create(s,{theme:"light",maxWidth:n[o]||n["default"],paddingInContent:"rack-link"===o});i.on("click.productPromo",function(e){e.preventDefault(),e.stopPropagation(),r.show()})})}i()}),define("nord/page/product",["jquery","nord/feature/productPage/shareButtons","nord/feature/productPage/shippingReturns","nord/feature/productPage/reviewQa","nord/feature/productPage/imageViewer","nord/feature/productPage/customerChoice","nord/feature/productPage/handleLegacyPopup","nord/feature/productPage/price","nord/feature/productPage/buyButton","nord/feature/productPage/holidayShippingGuide","nord/feature/productPage/giftCardCustomization","nord/feature/util/liveChat","nord/feature/productPage/waitlist","nord/feature/interaction/accordion","nord/feature/productPage/replenishmentReminder","nord/feature/productPage/consumerInsight","nord/feature/productPage/shoeFitr","nord/feature/productPage/truFit","nord/feature/productPage/productPromo"],function(e,t,i,o,n,s,r,a,l,d,c,u,h,p,f,m,g){function v(){t.init(),i.init(),e("#reviews-qa").length&&o.init(),s.init(),n.init(),a.init(),l.init(),c.init(),u.init(),h.init(),f.init(),m.init(),g.init()}v()})